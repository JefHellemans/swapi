!function(){Person=Backbone.Model.extend({defaults:function(){return{name:"",height:"",mass:"",hair_color:"",skin_color:"",eye_color:"",birth_year:"",gender:"",homeworld:"",films:[],species:[],vehicles:[],starships:[],created:"",edited:"",url:""}}}),People=Backbone.Collection.extend({model:Person,localStorage:new Store("people-backbone")}),Film=Backbone.Model.extend({defaults:function(){return{title:"",episode_id:"",opening_crawl:"",director:"",producer:"",release_date:"",characters:[],planets:[],starships:[],vehicles:[],species:[],created:"",edited:"",url:""}}}),Films=Backbone.Collection.extend({model:Film,localStorage:new Store("films-backbone")}),Starship=Backbone.Model.extend({defaults:function(){return{name:"",model:"",manufacturer:"",cost_in_credits:"",length:"",max_atmosphering_speed:"",crew:"",passengers:"",cargo_capacity:"",consumables:"",hyperdrive_rating:"",MGLT:"",starship_class:"",pilots:[],films:[],created:"",edited:"",url:""}}}),Starships=Backbone.Collection.extend({model:Starship,localStorage:new Store("starships-backbone")}),Vehicle=Backbone.Model.extend({defaults:function(){return{name:"",model:"",manufacturer:"",cost_in_credits:"",length:"",max_atmosphering_speed:"",crew:"",passengers:"",cargo_capacity:"",consumables:"",vehicle_class:"",pilots:[],films:[],created:"",edited:"",url:""}}}),Vehicles=Backbone.Collection.extend({model:Vehicle,localStorage:new Store("vehicles-backbone")}),Race=Backbone.Model.extend({defaults:function(){return{name:"",classification:"",designation:"",average_height:"",skin_colors:"",hair_colors:"",eye_colors:"",average_lifespan:"",homeworld:"",language:"",people:[],films:[],created:"",edited:"",url:""}}}),Species=Backbone.Collection.extend({model:Race,localStorage:new Store("species-backbone")}),Planet=Backbone.Model.extend({defaults:function(){return{name:"",rotation_period:"",orbital_period:"",diameter:"",climate:"",gravity:"",terrain:"",surface_water:"",population:"",residents:[],films:[],created:"",edited:"",url:""}}}),Planets=Backbone.Collection.extend({model:Planet,localStorage:new Store("planets-backbone")});var e=new People,t=new Films,s=new Starships,n=new Vehicles,a=new Species,i=new Planets,l=function(e,t,s,n,a){o(e,t,s.results,function(e,t){2>=n&&a(null,t)});for(var i=2;n+1>=i;i++)r(t,i,function(s,i,l){o(e,t,i.results,function(e,t){l>=n&&a(null,t)})})},r=function(e,t,s){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);s(null,e,t)}},n.open("GET","http://swapi.co/api/"+e+"/?page="+t+"&format=json",!0),n.send()},o=function(e,t,s,n){for(var a=s.length,i=0;a>i;i++)c(t,i,s[i],function(t,s,i){t?n(!0,null):(e.add(s),++i==a&&n(null,e))})},c=function(e,t,s,n){switch(e){case"people":p(s,function(e,s){n(null,s,t)});break;case"films":h(s,function(e,s){n(null,s,t)});break;case"starships":u(s,function(e,s){n(null,s,t)});break;case"vehicles":m(s,function(e,s){n(null,s,t)});break;case"species":d(s,function(e,s){n(null,s,t)});break;case"planets":f(s,function(e,s){n(null,s,t)});break;default:n(!0,null,t)}},p=function(e,t){if(e.name){var s=new Person;s.set("name",e.name),s.set("height",e.height),s.set("mass",e.mass),s.set("hair_color",e.hair_color),s.set("skin_color",e.skin_color),s.set("eye_color",e.eye_color),s.set("birth_year",e.birth_year),s.set("gender",e.gender),s.set("homeworld",e.homeworld),s.set("films",e.films),s.set("species",e.species),s.set("vehicles",e.vehicles),s.set("starships",e.starships),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},h=function(e,t){if(e.title){var s=new Film;s.set("title",e.title),s.set("episode_id",e.episode_id),s.set("opening_crawl",e.opening_crawl),s.set("director",e.director),s.set("producer",e.producer),s.set("release_date",e.release_date),s.set("characters",e.characters),s.set("planets",e.planets),s.set("starships",e.starships),s.set("vehicles",e.vehicles),s.set("species",e.species),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},u=function(e,t){if(e.name){var s=new Starship;s.set("name",e.name),s.set("model",e.model),s.set("manufacturer",e.manufacturer),s.set("cost_in_credits",e.cost_in_credits),s.set("length",e.length),s.set("max_atmosphering_speed",e.max_atmosphering_speed),s.set("crew",e.crew),s.set("passengers",e.passengers),s.set("cargo_capacity",e.cargo_capacity),s.set("consumables",e.consumables),s.set("hyperdrive_rating",e.hyperdrive_rating),s.set("MGLT",e.MGLT),s.set("starship_class",e.starship_class),s.set("pilots",e.pilots),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},m=function(e,t){if(e.name){var s=new Vehicle;s.set("name",e.name),s.set("model",e.model),s.set("manufacturer",e.manufacturer),s.set("cost_in_credits",e.cost_in_credits),s.set("length",e.length),s.set("max_atmosphering_speed",e.max_atmosphering_speed),s.set("crew",e.crew),s.set("passengers",e.passengers),s.set("cargo_capacity",e.cargo_capacity),s.set("consumables",e.consumables),s.set("vehicle_class",e.vehicle_class),s.set("pilots",e.pilots),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},d=function(e,t){if(e.name){var s=new Race;s.set("name",e.name),s.set("classification",e.classification),s.set("designation",e.designation),s.set("average_height",e.average_height),s.set("skin_colors",e.skin_colors),s.set("hair_colors",e.hair_colors),s.set("eye_colors",e.eye_colors),s.set("average_lifespan",e.average_lifespan),s.set("homeworld",e.homeworld),s.set("language",e.language),s.set("people",e.people),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},f=function(e,t){if(e.name){var s=new Planet;s.set("name",e.name),s.set("rotation_period",e.rotation_period),s.set("orbital_period",e.orbital_period),s.set("diameter",e.diameter),s.set("climate",e.climate),s.set("gravity",e.gravity),s.set("terrain",e.terrain),s.set("surface_water",e.surface_water),s.set("population",e.population),s.set("residents",e.residents),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},g=Backbone.View.extend({tagName:"section",template:_.template("<%- name %>"),events:{},makeList:function(e,t,s){var n=new w;n.showList(e,t,s)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),w=Backbone.View.extend({tagName:"li",template:_.template("<a href='#'><%- name %></a>"),group:"",events:{"click a":"showDetails"},showList:function(e,t,s){if(e.empty(),t instanceof Backbone.Model){var n=new w({model:t});n.group=s,"films"==s&&(n.template=_.template("<a href='#'><%- title %></a>")),e.append(n.render().el)}else t instanceof Backbone.Collection&&t.forEach(function(t,n){if(10>n){var a=new w({model:t});a.group=s,"films"==s&&(a.template=_.template("<a href='#'><%- title %></a>")),e.append(a.render().el)}})},showDetails:function(e){e.preventDefault(),document.getElementById("search").value="",b.search();var t=$("#result");t.empty();var s=new g({model:this.model});switch(this.group){case"people":s.template=_.template($("#person-template").html()),t.append(s.render().el),s.makeList($(".homeworld"),this.model.get("homeworld"),"planets"),s.makeList($(".films"),this.model.get("films"),"films"),s.makeList($(".species"),this.model.get("species"),"species"),s.makeList($(".vehicles"),this.model.get("vehicles"),"vehicles"),s.makeList($(".starships"),this.model.get("starships"),"starships");break;case"films":s.template=_.template($("#film-template").html()),t.append(s.render().el),s.makeList($(".characters"),this.model.get("characters"),"people"),s.makeList($(".planets"),this.model.get("planets"),"planets"),s.makeList($(".starships"),this.model.get("starships"),"starships"),s.makeList($(".vehicles"),this.model.get("vehicles"),"vehicles"),s.makeList($(".species"),this.model.get("species"),"species");break;case"starships":s.template=_.template($("#starship-template").html()),t.append(s.render().el),s.makeList($(".pilots"),this.model.get("pilots"),"people"),s.makeList($(".films"),this.model.get("films"),"films");break;case"vehicles":s.template=_.template($("#vehicle-template").html()),t.append(s.render().el),s.makeList($(".pilots"),this.model.get("pilots"),"people"),s.makeList($(".films"),this.model.get("films"),"films");break;case"species":s.template=_.template($("#race-template").html()),t.append(s.render().el),s.makeList($(".people"),this.model.get("people"),"people"),s.makeList($(".films"),this.model.get("films"),"films");break;case"planets":s.template=_.template($("#planet-template").html()),t.append(s.render().el),s.makeList($(".residents"),this.model.get("residents"),"people"),s.makeList($(".films"),this.model.get("films"),"films")}},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),k=Backbone.View.extend({el:$("#app"),template:_.template($("#loading-template").html()),status:"",events:{"keyup #search":"search",'click [type="checkbox"]':"search"},search:function(){var e=document.getElementById("search").value;v(e.length>=1?e:"thisstringshouldnevershowupandthereforeclearthelists")},initialize:function(){this.status="Bribing stormtroopers...",this.render()},showSearch:function(){this.status="",this.template=_.template($("#search-template").html()),this.render()},render:function(){""!=this.status?this.$el.html(this.template({status:this.status})):this.$el.html(this.template())}}),b=new k,v=function(l){$("input[type=checkbox]").each(function(){var r,o,c=$(this).val();switch(c){case"people":r=new People,o=e;break;case"films":r=new Films,o=t;break;case"starships":r=new Starships,o=s;break;case"vehicles":r=new Vehicles,o=n;break;case"species":r=new Species,o=a;break;case"planets":r=new Planets,o=i}if($(this).is(":checked"))y(r,o,c,l,function(e,t){var s=new w;s.showList($("#"+c),t,c)});else{var p=new w;p.showList($("#"+c),r,c)}})},y=function(e,t,s,n,a){t.forEach(function(i,l){L(s,i,n,function(s,n){n&&e.add(i),++l===t.length&&a(null,e)})})},L=function(e,t,s,n){var a;a="films"===e?t.get("title").toLowerCase():t.get("name").toLowerCase(),-1!=a.indexOf(s.toLowerCase())?n(null,!0):n(null,!1)},S=function(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var n=JSON.parse(s.responseText);l(e,t,n,n.count/10,function(e,s){B(t)})}},s.open("GET","http://swapi.co/api/"+t+"/?format=json",!0),s.send()},x=[],B=function(e){x.push(e),1===x.length&&(b.status="Feeding Chewie...",b.render()),2===x.length&&(b.status="Spellchecking Yoda...",b.render()),3===x.length&&(b.status="Hugging Darth Vader...",b.render()),4===x.length&&(b.status="Kissing Princess Leia...",b.render()),5===x.length&&(b.status="Podracing with Anakin...",b.render()),6===x.length&&P()},P=function(){x.forEach(function(e,t){E(e,function(e,s){++t===x.length&&b.showSearch()})})},E=function(l,r){switch(l){case"people":e.forEach(function(t,s){V(t,function(t,n){++s===e.length&&r(null,e)})});break;case"films":t.forEach(function(e,s){F(e,function(e,n){++s===t.length&&r(null,t)})});break;case"starships":s.forEach(function(e,t){T(e,function(e,n){++t===s.length&&r(null,s)})});break;case"vehicles":n.forEach(function(e,t){N(e,function(e,s){++t===n.length&&r(null,n)})});break;case"species":a.forEach(function(e,t){G(e,function(e,s){++t===a.length&&r(null,a)})});break;case"planets":i.forEach(function(e,t){O(e,function(e,s){++t===i.length&&r(null,i)})})}},M=function(l,r,o,c){var p,h=l.get(r);switch(o){case e:p=new People;break;case t:p=new Films;break;case s:p=new Starships;break;case n:p=new Vehicles;break;case a:p=new Species;break;case i:p=new Planets}"string"==typeof h?C(h,o,function(e,t){e||(l.set(r,t),c(null,l))}):h.length>0?h.forEach(function(e,t){C(e,o,function(e,t){e||p.add(t),p.length===h.length&&(l.set(r,p),c(null,l))})}):c(null,l)},C=function(e,t,s){t.forEach(function(n,a){n.get("url")===e&&s(null,n),++a===t.length&&s(!0,null)})},V=function(e,l){M(e,"films",t,function(t,r){e=r,M(e,"species",a,function(t,a){e=a,M(e,"vehicles",n,function(t,n){e=n,M(e,"starships",s,function(t,s){e=s,M(e,"homeworld",i,function(t,s){e=s,l(null,e)})})})})})},F=function(t,l){M(t,"characters",e,function(e,r){t=r,M(t,"planets",i,function(e,i){t=i,M(t,"starships",s,function(e,s){t=s,M(t,"vehicles",n,function(e,s){t=s,M(t,"species",a,function(e,s){t=s,l(null,t)})})})})})},T=function(s,n){M(s,"pilots",e,function(e,a){s=a,M(s,"films",t,function(e,t){s=t,n(null,s)})})},N=function(s,n){M(s,"pilots",e,function(e,a){s=a,M(s,"films",t,function(e,t){s=t,n(null,s)})})},G=function(s,n){M(s,"people",e,function(e,a){s=a,M(s,"films",t,function(e,t){s=t,n(null,s)})})},O=function(s,n){M(s,"residents",e,function(e,a){s=a,M(s,"films",t,function(e,t){s=t,n(null,s)})})};S(e,"people"),S(t,"films"),S(s,"starships"),S(n,"vehicles"),S(a,"species"),S(i,"planets")}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiUGVyc29uIiwiQmFja2JvbmUiLCJNb2RlbCIsImV4dGVuZCIsImRlZmF1bHRzIiwibmFtZSIsImhlaWdodCIsIm1hc3MiLCJoYWlyX2NvbG9yIiwic2tpbl9jb2xvciIsImV5ZV9jb2xvciIsImJpcnRoX3llYXIiLCJnZW5kZXIiLCJob21ld29ybGQiLCJmaWxtcyIsInNwZWNpZXMiLCJ2ZWhpY2xlcyIsInN0YXJzaGlwcyIsImNyZWF0ZWQiLCJlZGl0ZWQiLCJ1cmwiLCJQZW9wbGUiLCJDb2xsZWN0aW9uIiwibW9kZWwiLCJsb2NhbFN0b3JhZ2UiLCJTdG9yZSIsIkZpbG0iLCJ0aXRsZSIsImVwaXNvZGVfaWQiLCJvcGVuaW5nX2NyYXdsIiwiZGlyZWN0b3IiLCJwcm9kdWNlciIsInJlbGVhc2VfZGF0ZSIsImNoYXJhY3RlcnMiLCJwbGFuZXRzIiwiRmlsbXMiLCJTdGFyc2hpcCIsIm1hbnVmYWN0dXJlciIsImNvc3RfaW5fY3JlZGl0cyIsImxlbmd0aCIsIm1heF9hdG1vc3BoZXJpbmdfc3BlZWQiLCJjcmV3IiwicGFzc2VuZ2VycyIsImNhcmdvX2NhcGFjaXR5IiwiY29uc3VtYWJsZXMiLCJoeXBlcmRyaXZlX3JhdGluZyIsIk1HTFQiLCJzdGFyc2hpcF9jbGFzcyIsInBpbG90cyIsIlN0YXJzaGlwcyIsIlZlaGljbGUiLCJ2ZWhpY2xlX2NsYXNzIiwiVmVoaWNsZXMiLCJSYWNlIiwiY2xhc3NpZmljYXRpb24iLCJkZXNpZ25hdGlvbiIsImF2ZXJhZ2VfaGVpZ2h0Iiwic2tpbl9jb2xvcnMiLCJoYWlyX2NvbG9ycyIsImV5ZV9jb2xvcnMiLCJhdmVyYWdlX2xpZmVzcGFuIiwibGFuZ3VhZ2UiLCJwZW9wbGUiLCJTcGVjaWVzIiwiUGxhbmV0Iiwicm90YXRpb25fcGVyaW9kIiwib3JiaXRhbF9wZXJpb2QiLCJkaWFtZXRlciIsImNsaW1hdGUiLCJncmF2aXR5IiwidGVycmFpbiIsInN1cmZhY2Vfd2F0ZXIiLCJwb3B1bGF0aW9uIiwicmVzaWRlbnRzIiwiUGxhbmV0cyIsImdldEFycmF5RnJvbUFwaSIsImNvbGxlY3Rpb24iLCJncm91cCIsImZpcnN0UGFnZSIsImNvdW50IiwiY2IiLCJnZXRBcnJheSIsImVyciIsImNvbCIsImkiLCJnZXRFbGVtZW50RnJvbUFwaSIsImVsZW0iLCJwb3MiLCJnZXRQYWdlIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9wZW4iLCJzZW5kIiwiZWxlbWVudHMiLCJqIiwiZ2V0RWxlbWVudCIsImFkZCIsImNyZWF0ZVBlcnNvbiIsIml0ZW0iLCJjcmVhdGVGaWxtIiwiY3JlYXRlU3RhcnNoaXAiLCJjcmVhdGVWZWhpY2xlIiwiY3JlYXRlUmFjZSIsImNyZWF0ZVBsYW5ldCIsInAiLCJzZXQiLCJmIiwicyIsInYiLCJyIiwiRGV0YWlsVmlldyIsIlZpZXciLCJ0YWdOYW1lIiwidGVtcGxhdGUiLCJfIiwiZXZlbnRzIiwibWFrZUxpc3QiLCJlbGVtZW50IiwidmlldyIsIkl0ZW1WaWV3Iiwic2hvd0xpc3QiLCJyZW5kZXIiLCJ0aGlzIiwiJGVsIiwiaHRtbCIsInRvSlNPTiIsImNsaWNrIGEiLCJlbXB0eSIsImFwcGVuZCIsImVsIiwiZm9yRWFjaCIsImluZGV4Iiwic2hvd0RldGFpbHMiLCJlIiwicHJldmVudERlZmF1bHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJBcHAiLCJzZWFyY2giLCJjb250YWluZXIiLCIkIiwiZ2V0IiwiQXBwVmlldyIsImtleXVwICNzZWFyY2giLCJjbGljayBbdHlwZT1cImNoZWNrYm94XCJdIiwidmFsIiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJzaG93U2VhcmNoIiwiZWFjaCIsIm9wdGlvbnMiLCJpcyIsImNvbXBhcmVPcHRpb25zIiwibyIsIm9wdGlvbiIsImNvbXBhcmUiLCJhdHRyaWJ1dGUiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJsb2FkRnJvbUFwaSIsInJlcXVlc3QiLCJkb25lTG9hZGluZyIsImxvYWRlZCIsInB1c2giLCJtYWtlQ29sbGVjdGlvbnMiLCJjb2xsZWN0Rm9yR3JvdXAiLCJwZXJzb24iLCJjb2xsZWN0Rm9yUGVyc29uIiwiZmlsbSIsImNvbGxlY3RGb3JGaWxtIiwic3RhcnNoaXAiLCJjb2xsZWN0Rm9yU3RhcnNoaXAiLCJ2ZWhpY2xlIiwiY29sbGVjdEZvclZlaGljbGUiLCJyYWNlIiwiY29sbGVjdEZvclJhY2UiLCJwbGFuZXQiLCJjb2xsZWN0Rm9yUGxhbmV0IiwiY29sbGVjdCIsIm9iamVjdHMiLCJ2YWx1ZXMiLCJnZXRWYWx1ZUZyb21Db2xsZWN0aW9uIiwib2JqZWN0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVBQSxPQUFBQyxTQUFBQyxNQUFBQyxRQUVBQyxTQUFBLFdBQ0EsT0FDQUMsS0FBQSxHQUNBQyxPQUFBLEdBQ0FDLEtBQUEsR0FDQUMsV0FBQSxHQUNBQyxXQUFBLEdBQ0FDLFVBQUEsR0FDQUMsV0FBQSxHQUNBQyxPQUFBLEdBQ0FDLFVBQUEsR0FDQUMsU0FDQUMsV0FDQUMsWUFDQUMsYUFDQUMsUUFBQSxHQUNBQyxPQUFBLEdBQ0FDLElBQUEsT0FNQUMsT0FBQXBCLFNBQUFxQixXQUFBbkIsUUFFQW9CLE1BQUF2QixPQUNBd0IsYUFBQSxHQUFBQyxPQUFBLHFCQUlBQyxLQUFBekIsU0FBQUMsTUFBQUMsUUFFQUMsU0FBQSxXQUNBLE9BQ0F1QixNQUFBLEdBQ0FDLFdBQUEsR0FDQUMsY0FBQSxHQUNBQyxTQUFBLEdBQ0FDLFNBQUEsR0FDQUMsYUFBQSxHQUNBQyxjQUNBQyxXQUNBakIsYUFDQUQsWUFDQUQsV0FDQUcsUUFBQSxHQUNBQyxPQUFBLEdBQ0FDLElBQUEsT0FNQWUsTUFBQWxDLFNBQUFxQixXQUFBbkIsUUFFQW9CLE1BQUFHLEtBQ0FGLGFBQUEsR0FBQUMsT0FBQSxvQkFJQVcsU0FBQW5DLFNBQUFDLE1BQUFDLFFBRUFDLFNBQUEsV0FD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Iiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXG4gICAgUGVyc29uID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcblxuICAgICAgICBkZWZhdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBcIlwiLFxuICAgICAgICAgICAgICAgIG1hc3M6IFwiXCIsXG4gICAgICAgICAgICAgICAgaGFpcl9jb2xvcjogXCJcIixcbiAgICAgICAgICAgICAgICBza2luX2NvbG9yOiBcIlwiLFxuICAgICAgICAgICAgICAgIGV5ZV9jb2xvcjogXCJcIixcbiAgICAgICAgICAgICAgICBiaXJ0aF95ZWFyOiBcIlwiLFxuICAgICAgICAgICAgICAgIGdlbmRlcjogXCJcIixcbiAgICAgICAgICAgICAgICBob21ld29ybGQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZmlsbXM6IFtdLFxuICAgICAgICAgICAgICAgIHNwZWNpZXM6IFtdLFxuICAgICAgICAgICAgICAgIHZlaGljbGVzOiBbXSxcbiAgICAgICAgICAgICAgICBzdGFyc2hpcHM6IFtdLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZWRpdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBQZW9wbGUgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgICAgICAgbW9kZWw6IFBlcnNvbixcbiAgICAgICAgbG9jYWxTdG9yYWdlOiBuZXcgU3RvcmUoXCJwZW9wbGUtYmFja2JvbmVcIilcblxuICAgIH0pO1xuXG4gICAgRmlsbSA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG5cbiAgICAgICAgZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJcIixcbiAgICAgICAgICAgICAgICBlcGlzb2RlX2lkOiBcIlwiLFxuICAgICAgICAgICAgICAgIG9wZW5pbmdfY3Jhd2w6IFwiXCIsXG4gICAgICAgICAgICAgICAgZGlyZWN0b3I6IFwiXCIsXG4gICAgICAgICAgICAgICAgcHJvZHVjZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgcmVsZWFzZV9kYXRlOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcnM6IFtdLFxuICAgICAgICAgICAgICAgIHBsYW5ldHM6IFtdLFxuICAgICAgICAgICAgICAgIHN0YXJzaGlwczogW10sXG4gICAgICAgICAgICAgICAgdmVoaWNsZXM6IFtdLFxuICAgICAgICAgICAgICAgIHNwZWNpZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZWRpdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBGaWxtcyA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuICAgICAgICBtb2RlbDogRmlsbSxcbiAgICAgICAgbG9jYWxTdG9yYWdlOiBuZXcgU3RvcmUoXCJmaWxtcy1iYWNrYm9uZVwiKVxuXG4gICAgfSk7XG5cbiAgICBTdGFyc2hpcCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG5cbiAgICAgICAgZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIlwiLFxuICAgICAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJcIixcbiAgICAgICAgICAgICAgICBjb3N0X2luX2NyZWRpdHM6IFwiXCIsXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBcIlwiLFxuICAgICAgICAgICAgICAgIG1heF9hdG1vc3BoZXJpbmdfc3BlZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgY3JldzogXCJcIixcbiAgICAgICAgICAgICAgICBwYXNzZW5nZXJzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNhcmdvX2NhcGFjaXR5OiBcIlwiLFxuICAgICAgICAgICAgICAgIGNvbnN1bWFibGVzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGh5cGVyZHJpdmVfcmF0aW5nOiBcIlwiLFxuICAgICAgICAgICAgICAgIE1HTFQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgc3RhcnNoaXBfY2xhc3M6IFwiXCIsXG4gICAgICAgICAgICAgICAgcGlsb3RzOiBbXSxcbiAgICAgICAgICAgICAgICBmaWxtczogW10sXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICBlZGl0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBcIlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIFN0YXJzaGlwcyA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuICAgICAgICBtb2RlbDogU3RhcnNoaXAsXG4gICAgICAgIGxvY2FsU3RvcmFnZTogbmV3IFN0b3JlKFwic3RhcnNoaXBzLWJhY2tib25lXCIpXG5cbiAgICB9KTtcblxuICAgIFZlaGljbGUgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuXG4gICAgICAgIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJcIixcbiAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgY29zdF9pbl9jcmVkaXRzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogXCJcIixcbiAgICAgICAgICAgICAgICBtYXhfYXRtb3NwaGVyaW5nX3NwZWVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNyZXc6IFwiXCIsXG4gICAgICAgICAgICAgICAgcGFzc2VuZ2VyczogXCJcIixcbiAgICAgICAgICAgICAgICBjYXJnb19jYXBhY2l0eTogXCJcIixcbiAgICAgICAgICAgICAgICBjb25zdW1hYmxlczogXCJcIixcbiAgICAgICAgICAgICAgICB2ZWhpY2xlX2NsYXNzOiBcIlwiLFxuICAgICAgICAgICAgICAgIHBpbG90czogW10sXG4gICAgICAgICAgICAgICAgZmlsbXM6IFtdLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZWRpdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBWZWhpY2xlcyA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuICAgICAgICBtb2RlbDogVmVoaWNsZSxcbiAgICAgICAgbG9jYWxTdG9yYWdlOiBuZXcgU3RvcmUoXCJ2ZWhpY2xlcy1iYWNrYm9uZVwiKVxuXG4gICAgfSk7XG5cbiAgICBSYWNlID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcblxuICAgICAgICBkZWZhdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgY2xhc3NpZmljYXRpb246IFwiXCIsXG4gICAgICAgICAgICAgICAgZGVzaWduYXRpb246IFwiXCIsXG4gICAgICAgICAgICAgICAgYXZlcmFnZV9oZWlnaHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgc2tpbl9jb2xvcnM6IFwiXCIsXG4gICAgICAgICAgICAgICAgaGFpcl9jb2xvcnM6IFwiXCIsXG4gICAgICAgICAgICAgICAgZXllX2NvbG9yczogXCJcIixcbiAgICAgICAgICAgICAgICBhdmVyYWdlX2xpZmVzcGFuOiBcIlwiLFxuICAgICAgICAgICAgICAgIGhvbWV3b3JsZDogXCJcIixcbiAgICAgICAgICAgICAgICBsYW5ndWFnZTogXCJcIixcbiAgICAgICAgICAgICAgICBwZW9wbGU6IFtdLFxuICAgICAgICAgICAgICAgIGZpbG1zOiBbXSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGVkaXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIFNwZWNpZXMgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgICAgICAgbW9kZWw6IFJhY2UsXG4gICAgICAgIGxvY2FsU3RvcmFnZTogbmV3IFN0b3JlKFwic3BlY2llcy1iYWNrYm9uZVwiKVxuXG4gICAgfSk7XG5cbiAgICBQbGFuZXQgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuXG4gICAgICAgIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICByb3RhdGlvbl9wZXJpb2Q6IFwiXCIsXG4gICAgICAgICAgICAgICAgb3JiaXRhbF9wZXJpb2Q6IFwiXCIsXG4gICAgICAgICAgICAgICAgZGlhbWV0ZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgY2xpbWF0ZTogXCJcIixcbiAgICAgICAgICAgICAgICBncmF2aXR5OiBcIlwiLFxuICAgICAgICAgICAgICAgIHRlcnJhaW46IFwiXCIsXG4gICAgICAgICAgICAgICAgc3VyZmFjZV93YXRlcjogXCJcIixcbiAgICAgICAgICAgICAgICBwb3B1bGF0aW9uOiBcIlwiLFxuICAgICAgICAgICAgICAgIHJlc2lkZW50czogW10sXG4gICAgICAgICAgICAgICAgZmlsbXM6IFtdLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZWRpdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBQbGFuZXRzID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuXG4gICAgICAgIG1vZGVsOiBQbGFuZXQsXG4gICAgICAgIGxvY2FsU3RvcmFnZTogbmV3IFN0b3JlKFwicGxhbmV0cy1iYWNrYm9uZVwiKVxuXG4gICAgfSk7XG5cbiAgICB2YXIgcGVvcGxlID0gbmV3IFBlb3BsZSgpO1xuICAgIHZhciBmaWxtcyA9IG5ldyBGaWxtcygpO1xuICAgIHZhciBzdGFyc2hpcHMgPSBuZXcgU3RhcnNoaXBzKCk7XG4gICAgdmFyIHZlaGljbGVzID0gbmV3IFZlaGljbGVzKCk7XG4gICAgdmFyIHNwZWNpZXMgPSBuZXcgU3BlY2llcygpO1xuICAgIHZhciBwbGFuZXRzID0gbmV3IFBsYW5ldHMoKTtcblxuICAgIHZhciBnZXRBcnJheUZyb21BcGkgPSBmdW5jdGlvbihjb2xsZWN0aW9uLCBncm91cCwgZmlyc3RQYWdlLCBjb3VudCwgY2IpIHtcbiAgICAgICAgZ2V0QXJyYXkoY29sbGVjdGlvbiwgZ3JvdXAsIGZpcnN0UGFnZVtcInJlc3VsdHNcIl0sIGZ1bmN0aW9uKGVyciwgY29sKSB7XG4gICAgICAgICAgICBpZihjb3VudCA8PSAyKSB7XG4gICAgICAgICAgICAgICAgY2IobnVsbCwgY29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZvcih2YXIgaSA9IDI7IGkgPD0gY291bnQgKyAxOyBpKyspIHtcbiAgICAgICAgICAgIGdldEVsZW1lbnRGcm9tQXBpKGdyb3VwLCBpLCBmdW5jdGlvbihlcnIsIGVsZW0sIHBvcykge1xuICAgICAgICAgICAgICAgIGdldEFycmF5KGNvbGxlY3Rpb24sIGdyb3VwLCBlbGVtW1wicmVzdWx0c1wiXSwgZnVuY3Rpb24oZXJyLCBjb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocG9zID49IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBjb2wpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0RWxlbWVudEZyb21BcGkgPSBmdW5jdGlvbihncm91cCwgZWxlbSwgY2IpIHtcbiAgICAgICAgdmFyIGdldFBhZ2UgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgZ2V0UGFnZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChnZXRQYWdlLnJlYWR5U3RhdGUgPT0gNCAmJiBnZXRQYWdlLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZ2V0UGFnZS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIGNiKG51bGwsIGRhdGEsIGVsZW0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGdldFBhZ2Uub3BlbihcIkdFVFwiLCBcImh0dHA6Ly9zd2FwaS5jby9hcGkvXCIgKyBncm91cCArIFwiLz9wYWdlPVwiICsgZWxlbSArIFwiJmZvcm1hdD1qc29uXCIsIHRydWUpO1xuICAgICAgICBnZXRQYWdlLnNlbmQoKTtcbiAgICB9O1xuXG4gICAgdmFyIGdldEFycmF5ID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgZ3JvdXAsIGVsZW1lbnRzLCBjYikge1xuICAgICAgICB2YXIgY291bnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBjb3VudDsgaisrKSB7XG4gICAgICAgICAgICBnZXRFbGVtZW50KGdyb3VwLCBqLCBlbGVtZW50c1tqXSwgZnVuY3Rpb24oZXJyLCBlbGVtLCBwb3MpIHtcbiAgICAgICAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5hZGQoZWxlbSk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCsrcG9zID09IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRFbGVtZW50ID0gZnVuY3Rpb24oZ3JvdXAsIHBvcywgZWxlbSwgY2IpIHtcbiAgICAgICAgc3dpdGNoKGdyb3VwKSB7XG4gICAgICAgICAgICBjYXNlIFwicGVvcGxlXCI6XG4gICAgICAgICAgICAgICAgY3JlYXRlUGVyc29uKGVsZW0sIGZ1bmN0aW9uKGVyciwgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtLCBwb3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImZpbG1zXCI6XG4gICAgICAgICAgICAgICAgY3JlYXRlRmlsbShlbGVtLCBmdW5jdGlvbihlcnIsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgaXRlbSwgcG9zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzdGFyc2hpcHNcIjpcbiAgICAgICAgICAgICAgICBjcmVhdGVTdGFyc2hpcChlbGVtLCBmdW5jdGlvbihlcnIsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgaXRlbSwgcG9zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ2ZWhpY2xlc1wiOlxuICAgICAgICAgICAgICAgIGNyZWF0ZVZlaGljbGUoZWxlbSwgZnVuY3Rpb24oZXJyLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0sIHBvcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3BlY2llc1wiOlxuICAgICAgICAgICAgICAgIGNyZWF0ZVJhY2UoZWxlbSwgZnVuY3Rpb24oZXJyLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0sIHBvcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicGxhbmV0c1wiOlxuICAgICAgICAgICAgICAgIGNyZWF0ZVBsYW5ldChlbGVtLCBmdW5jdGlvbihlcnIsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgaXRlbSwgcG9zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCwgcG9zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlUGVyc29uID0gZnVuY3Rpb24oZGF0YSwgY2IpIHtcbiAgICAgICAgaWYoIWRhdGFbXCJuYW1lXCJdKSB7XG4gICAgICAgICAgICBjYih0cnVlLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFBlcnNvbigpO1xuICAgICAgICAgICAgcC5zZXQoJ25hbWUnLCBkYXRhW1wibmFtZVwiXSk7XG4gICAgICAgICAgICBwLnNldCgnaGVpZ2h0JywgZGF0YVtcImhlaWdodFwiXSk7XG4gICAgICAgICAgICBwLnNldCgnbWFzcycsIGRhdGFbXCJtYXNzXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdoYWlyX2NvbG9yJywgZGF0YVtcImhhaXJfY29sb3JcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3NraW5fY29sb3InLCBkYXRhW1wic2tpbl9jb2xvclwiXSk7XG4gICAgICAgICAgICBwLnNldCgnZXllX2NvbG9yJywgZGF0YVtcImV5ZV9jb2xvclwiXSk7XG4gICAgICAgICAgICBwLnNldCgnYmlydGhfeWVhcicsIGRhdGFbXCJiaXJ0aF95ZWFyXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdnZW5kZXInLCBkYXRhW1wiZ2VuZGVyXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdob21ld29ybGQnLCBkYXRhW1wiaG9tZXdvcmxkXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdmaWxtcycsIGRhdGFbXCJmaWxtc1wiXSk7XG4gICAgICAgICAgICBwLnNldCgnc3BlY2llcycsIGRhdGFbXCJzcGVjaWVzXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCd2ZWhpY2xlcycsIGRhdGFbXCJ2ZWhpY2xlc1wiXSk7XG4gICAgICAgICAgICBwLnNldCgnc3RhcnNoaXBzJywgZGF0YVtcInN0YXJzaGlwc1wiXSk7XG4gICAgICAgICAgICBwLnNldCgnY3JlYXRlZCcsIGRhdGFbXCJjcmVhdGVkXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdlZGl0ZWQnLCBkYXRhW1wiZWRpdGVkXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCd1cmwnLCBkYXRhW1widXJsXCJdKTtcbiAgICAgICAgICAgIGNiKG51bGwsIHApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVGaWxtID0gZnVuY3Rpb24oZGF0YSwgY2IpIHtcbiAgICAgICAgaWYoIWRhdGFbXCJ0aXRsZVwiXSkge1xuICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZiA9IG5ldyBGaWxtKCk7XG4gICAgICAgICAgICBmLnNldCgndGl0bGUnLCBkYXRhW1widGl0bGVcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ2VwaXNvZGVfaWQnLCBkYXRhW1wiZXBpc29kZV9pZFwiXSk7XG4gICAgICAgICAgICBmLnNldCgnb3BlbmluZ19jcmF3bCcsIGRhdGFbXCJvcGVuaW5nX2NyYXdsXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdkaXJlY3RvcicsIGRhdGFbXCJkaXJlY3RvclwiXSk7XG4gICAgICAgICAgICBmLnNldCgncHJvZHVjZXInLCBkYXRhW1wicHJvZHVjZXJcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ3JlbGVhc2VfZGF0ZScsIGRhdGFbXCJyZWxlYXNlX2RhdGVcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ2NoYXJhY3RlcnMnLCBkYXRhW1wiY2hhcmFjdGVyc1wiXSk7XG4gICAgICAgICAgICBmLnNldCgncGxhbmV0cycsIGRhdGFbXCJwbGFuZXRzXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdzdGFyc2hpcHMnLCBkYXRhW1wic3RhcnNoaXBzXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCd2ZWhpY2xlcycsIGRhdGFbXCJ2ZWhpY2xlc1wiXSk7XG4gICAgICAgICAgICBmLnNldCgnc3BlY2llcycsIGRhdGFbXCJzcGVjaWVzXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdjcmVhdGVkJywgZGF0YVtcImNyZWF0ZWRcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ2VkaXRlZCcsIGRhdGFbXCJlZGl0ZWRcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ3VybCcsIGRhdGFbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgY2IobnVsbCwgZik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVN0YXJzaGlwID0gZnVuY3Rpb24oZGF0YSwgY2IpIHtcbiAgICAgICAgaWYoIWRhdGFbXCJuYW1lXCJdKSB7XG4gICAgICAgICAgICBjYih0cnVlLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzID0gbmV3IFN0YXJzaGlwKCk7XG4gICAgICAgICAgICBzLnNldCgnbmFtZScsIGRhdGFbXCJuYW1lXCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdtb2RlbCcsIGRhdGFbXCJtb2RlbFwiXSk7XG4gICAgICAgICAgICBzLnNldCgnbWFudWZhY3R1cmVyJywgZGF0YVtcIm1hbnVmYWN0dXJlclwiXSk7XG4gICAgICAgICAgICBzLnNldCgnY29zdF9pbl9jcmVkaXRzJywgZGF0YVtcImNvc3RfaW5fY3JlZGl0c1wiXSk7XG4gICAgICAgICAgICBzLnNldCgnbGVuZ3RoJywgZGF0YVtcImxlbmd0aFwiXSk7XG4gICAgICAgICAgICBzLnNldCgnbWF4X2F0bW9zcGhlcmluZ19zcGVlZCcsIGRhdGFbXCJtYXhfYXRtb3NwaGVyaW5nX3NwZWVkXCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdjcmV3JywgZGF0YVtcImNyZXdcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ3Bhc3NlbmdlcnMnLCBkYXRhW1wicGFzc2VuZ2Vyc1wiXSk7XG4gICAgICAgICAgICBzLnNldCgnY2FyZ29fY2FwYWNpdHknLCBkYXRhW1wiY2FyZ29fY2FwYWNpdHlcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2NvbnN1bWFibGVzJywgZGF0YVtcImNvbnN1bWFibGVzXCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdoeXBlcmRyaXZlX3JhdGluZycsIGRhdGFbXCJoeXBlcmRyaXZlX3JhdGluZ1wiXSk7XG4gICAgICAgICAgICBzLnNldCgnTUdMVCcsIGRhdGFbXCJNR0xUXCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdzdGFyc2hpcF9jbGFzcycsIGRhdGFbXCJzdGFyc2hpcF9jbGFzc1wiXSk7XG4gICAgICAgICAgICBzLnNldCgncGlsb3RzJywgZGF0YVtcInBpbG90c1wiXSk7XG4gICAgICAgICAgICBzLnNldCgnZmlsbXMnLCBkYXRhW1wiZmlsbXNcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2NyZWF0ZWQnLCBkYXRhW1wiY3JlYXRlZFwiXSk7XG4gICAgICAgICAgICBzLnNldCgnZWRpdGVkJywgZGF0YVtcImVkaXRlZFwiXSk7XG4gICAgICAgICAgICBzLnNldCgndXJsJywgZGF0YVtcInVybFwiXSk7XG4gICAgICAgICAgICBjYihudWxsLCBzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlVmVoaWNsZSA9IGZ1bmN0aW9uKGRhdGEsIGNiKSB7XG4gICAgICAgIGlmKCFkYXRhW1wibmFtZVwiXSkge1xuICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBWZWhpY2xlKCk7XG4gICAgICAgICAgICB2LnNldCgnbmFtZScsIGRhdGFbXCJuYW1lXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdtb2RlbCcsIGRhdGFbXCJtb2RlbFwiXSk7XG4gICAgICAgICAgICB2LnNldCgnbWFudWZhY3R1cmVyJywgZGF0YVtcIm1hbnVmYWN0dXJlclwiXSk7XG4gICAgICAgICAgICB2LnNldCgnY29zdF9pbl9jcmVkaXRzJywgZGF0YVtcImNvc3RfaW5fY3JlZGl0c1wiXSk7XG4gICAgICAgICAgICB2LnNldCgnbGVuZ3RoJywgZGF0YVtcImxlbmd0aFwiXSk7XG4gICAgICAgICAgICB2LnNldCgnbWF4X2F0bW9zcGhlcmluZ19zcGVlZCcsIGRhdGFbXCJtYXhfYXRtb3NwaGVyaW5nX3NwZWVkXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdjcmV3JywgZGF0YVtcImNyZXdcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ3Bhc3NlbmdlcnMnLCBkYXRhW1wicGFzc2VuZ2Vyc1wiXSk7XG4gICAgICAgICAgICB2LnNldCgnY2FyZ29fY2FwYWNpdHknLCBkYXRhW1wiY2FyZ29fY2FwYWNpdHlcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ2NvbnN1bWFibGVzJywgZGF0YVtcImNvbnN1bWFibGVzXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCd2ZWhpY2xlX2NsYXNzJywgZGF0YVtcInZlaGljbGVfY2xhc3NcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ3BpbG90cycsIGRhdGFbXCJwaWxvdHNcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ2ZpbG1zJywgZGF0YVtcImZpbG1zXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdjcmVhdGVkJywgZGF0YVtcImNyZWF0ZWRcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ2VkaXRlZCcsIGRhdGFbXCJlZGl0ZWRcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ3VybCcsIGRhdGFbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgY2IobnVsbCwgdik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVJhY2UgPSBmdW5jdGlvbihkYXRhLCBjYikge1xuICAgICAgICBpZighZGF0YVtcIm5hbWVcIl0pIHtcbiAgICAgICAgICAgIGNiKHRydWUsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHIgPSBuZXcgUmFjZSgpO1xuICAgICAgICAgICAgci5zZXQoJ25hbWUnLCBkYXRhW1wibmFtZVwiXSk7XG4gICAgICAgICAgICByLnNldCgnY2xhc3NpZmljYXRpb24nLCBkYXRhW1wiY2xhc3NpZmljYXRpb25cIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2Rlc2lnbmF0aW9uJywgZGF0YVtcImRlc2lnbmF0aW9uXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdhdmVyYWdlX2hlaWdodCcsIGRhdGFbXCJhdmVyYWdlX2hlaWdodFwiXSk7XG4gICAgICAgICAgICByLnNldCgnc2tpbl9jb2xvcnMnLCBkYXRhW1wic2tpbl9jb2xvcnNcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2hhaXJfY29sb3JzJywgZGF0YVtcImhhaXJfY29sb3JzXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdleWVfY29sb3JzJywgZGF0YVtcImV5ZV9jb2xvcnNcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2F2ZXJhZ2VfbGlmZXNwYW4nLCBkYXRhW1wiYXZlcmFnZV9saWZlc3BhblwiXSk7XG4gICAgICAgICAgICByLnNldCgnaG9tZXdvcmxkJywgZGF0YVtcImhvbWV3b3JsZFwiXSk7XG4gICAgICAgICAgICByLnNldCgnbGFuZ3VhZ2UnLCBkYXRhW1wibGFuZ3VhZ2VcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ3Blb3BsZScsIGRhdGFbXCJwZW9wbGVcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2ZpbG1zJywgZGF0YVtcImZpbG1zXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdjcmVhdGVkJywgZGF0YVtcImNyZWF0ZWRcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2VkaXRlZCcsIGRhdGFbXCJlZGl0ZWRcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ3VybCcsIGRhdGFbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgY2IobnVsbCwgcik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVBsYW5ldCA9IGZ1bmN0aW9uKGRhdGEsIGNiKSB7XG4gICAgICAgIGlmKCFkYXRhW1wibmFtZVwiXSkge1xuICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcCA9IG5ldyBQbGFuZXQoKTtcbiAgICAgICAgICAgIHAuc2V0KCduYW1lJywgZGF0YVtcIm5hbWVcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3JvdGF0aW9uX3BlcmlvZCcsIGRhdGFbXCJyb3RhdGlvbl9wZXJpb2RcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ29yYml0YWxfcGVyaW9kJywgZGF0YVtcIm9yYml0YWxfcGVyaW9kXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdkaWFtZXRlcicsIGRhdGFbXCJkaWFtZXRlclwiXSk7XG4gICAgICAgICAgICBwLnNldCgnY2xpbWF0ZScsIGRhdGFbXCJjbGltYXRlXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdncmF2aXR5JywgZGF0YVtcImdyYXZpdHlcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3RlcnJhaW4nLCBkYXRhW1widGVycmFpblwiXSk7XG4gICAgICAgICAgICBwLnNldCgnc3VyZmFjZV93YXRlcicsIGRhdGFbXCJzdXJmYWNlX3dhdGVyXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdwb3B1bGF0aW9uJywgZGF0YVtcInBvcHVsYXRpb25cIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3Jlc2lkZW50cycsIGRhdGFbXCJyZXNpZGVudHNcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2ZpbG1zJywgZGF0YVtcImZpbG1zXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdjcmVhdGVkJywgZGF0YVtcImNyZWF0ZWRcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2VkaXRlZCcsIGRhdGFbXCJlZGl0ZWRcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3VybCcsIGRhdGFbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgY2IobnVsbCwgcCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIERldGFpbFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRhZ05hbWU6IFwic2VjdGlvblwiLFxuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZShcIjwlLSBuYW1lICU+XCIpLFxuICAgICAgICBldmVudHM6IHtcblxuICAgICAgICB9LFxuICAgICAgICBtYWtlTGlzdDogZnVuY3Rpb24oZWxlbWVudCwgY29sbGVjdGlvbiwgZ3JvdXApIHtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IEl0ZW1WaWV3KCk7XG4gICAgICAgICAgICB2aWV3LnNob3dMaXN0KGVsZW1lbnQsIGNvbGxlY3Rpb24sIGdyb3VwKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLnRvSlNPTigpKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIEl0ZW1WaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0YWdOYW1lOiBcImxpXCIsXG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKFwiPGEgaHJlZj0nIyc+PCUtIG5hbWUgJT48L2E+XCIpLFxuICAgICAgICBncm91cDogXCJcIixcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICAnY2xpY2sgYSc6ICdzaG93RGV0YWlscydcbiAgICAgICAgfSxcbiAgICAgICAgc2hvd0xpc3Q6IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbGxlY3Rpb24sIGdyb3VwKSB7XG4gICAgICAgICAgICBlbGVtZW50LmVtcHR5KCk7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbiBpbnN0YW5jZW9mIEJhY2tib25lLk1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSXRlbVZpZXcoe21vZGVsOiBjb2xsZWN0aW9ufSk7XG4gICAgICAgICAgICAgICAgdmlldy5ncm91cCA9IGdyb3VwO1xuICAgICAgICAgICAgICAgIGlmKGdyb3VwID09IFwiZmlsbXNcIikge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnRlbXBsYXRlID0gXy50ZW1wbGF0ZShcIjxhIGhyZWY9JyMnPjwlLSB0aXRsZSAlPjwvYT5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xsZWN0aW9uIGluc3RhbmNlb2YgQmFja2JvbmUuQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA8IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBJdGVtVmlldyh7bW9kZWw6IGl0ZW19KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZ3JvdXAgPSBncm91cDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdyb3VwID09IFwiZmlsbXNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcudGVtcGxhdGUgPSBfLnRlbXBsYXRlKFwiPGEgaHJlZj0nIyc+PCUtIHRpdGxlICU+PC9hPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dEZXRhaWxzOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaFwiKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBBcHAuc2VhcmNoKCk7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gJChcIiNyZXN1bHRcIik7XG4gICAgICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERldGFpbFZpZXcoe21vZGVsOiB0aGlzLm1vZGVsfSk7XG4gICAgICAgICAgICBzd2l0Y2godGhpcy5ncm91cCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwZW9wbGVcIjpcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJChcIiNwZXJzb24tdGVtcGxhdGVcIikuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh2aWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLmhvbWV3b3JsZFwiKSwgdGhpcy5tb2RlbC5nZXQoJ2hvbWV3b3JsZCcpLCBcInBsYW5ldHNcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIi5maWxtc1wiKSwgdGhpcy5tb2RlbC5nZXQoJ2ZpbG1zJyksIFwiZmlsbXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIi5zcGVjaWVzXCIpLCB0aGlzLm1vZGVsLmdldCgnc3BlY2llcycpLCBcInNwZWNpZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIi52ZWhpY2xlc1wiKSwgdGhpcy5tb2RlbC5nZXQoJ3ZlaGljbGVzJyksIFwidmVoaWNsZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIi5zdGFyc2hpcHNcIiksIHRoaXMubW9kZWwuZ2V0KCdzdGFyc2hpcHMnKSwgXCJzdGFyc2hpcHNcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxtc1wiOlxuICAgICAgICAgICAgICAgICAgICB2aWV3LnRlbXBsYXRlID0gXy50ZW1wbGF0ZSgkKFwiI2ZpbG0tdGVtcGxhdGVcIikuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh2aWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLmNoYXJhY3RlcnNcIiksIHRoaXMubW9kZWwuZ2V0KCdjaGFyYWN0ZXJzJyksIFwicGVvcGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIucGxhbmV0c1wiKSwgdGhpcy5tb2RlbC5nZXQoJ3BsYW5ldHMnKSwgXCJwbGFuZXRzXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIuc3RhcnNoaXBzXCIpLCB0aGlzLm1vZGVsLmdldCgnc3RhcnNoaXBzJyksIFwic3RhcnNoaXBzXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIudmVoaWNsZXNcIiksIHRoaXMubW9kZWwuZ2V0KCd2ZWhpY2xlcycpLCBcInZlaGljbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIuc3BlY2llc1wiKSwgdGhpcy5tb2RlbC5nZXQoJ3NwZWNpZXMnKSwgXCJzcGVjaWVzXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnNoaXBzXCI6XG4gICAgICAgICAgICAgICAgICAgIHZpZXcudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoXCIjc3RhcnNoaXAtdGVtcGxhdGVcIikuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh2aWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLnBpbG90c1wiKSwgdGhpcy5tb2RlbC5nZXQoJ3BpbG90cycpLCBcInBlb3BsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLmZpbG1zXCIpLCB0aGlzLm1vZGVsLmdldCgnZmlsbXMnKSwgXCJmaWxtc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInZlaGljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIHZpZXcudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoXCIjdmVoaWNsZS10ZW1wbGF0ZVwiKS5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIucGlsb3RzXCIpLCB0aGlzLm1vZGVsLmdldCgncGlsb3RzJyksIFwicGVvcGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIuZmlsbXNcIiksIHRoaXMubW9kZWwuZ2V0KCdmaWxtcycpLCBcImZpbG1zXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3BlY2llc1wiOlxuICAgICAgICAgICAgICAgICAgICB2aWV3LnRlbXBsYXRlID0gXy50ZW1wbGF0ZSgkKFwiI3JhY2UtdGVtcGxhdGVcIikuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh2aWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLnBlb3BsZVwiKSwgdGhpcy5tb2RlbC5nZXQoJ3Blb3BsZScpLCBcInBlb3BsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLmZpbG1zXCIpLCB0aGlzLm1vZGVsLmdldCgnZmlsbXMnKSwgXCJmaWxtc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBsYW5ldHNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJChcIiNwbGFuZXQtdGVtcGxhdGVcIikuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh2aWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLnJlc2lkZW50c1wiKSwgdGhpcy5tb2RlbC5nZXQoJ3Jlc2lkZW50cycpLCBcInBlb3BsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiLmZpbG1zXCIpLCB0aGlzLm1vZGVsLmdldCgnZmlsbXMnKSwgXCJmaWxtc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXG4gICAgICAgIGVsOiAkKFwiI2FwcFwiKSxcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUoJCgnI2xvYWRpbmctdGVtcGxhdGUnKS5odG1sKCkpLFxuICAgICAgICBzdGF0dXM6IFwiXCIsXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgJ2tleXVwICNzZWFyY2gnOiAnc2VhcmNoJyxcbiAgICAgICAgICAgICdjbGljayBbdHlwZT1cImNoZWNrYm94XCJdJzonc2VhcmNoJ1xuICAgICAgICB9LFxuICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgdmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikudmFsdWU7XG4gICAgICAgICAgICBpZih2YWwubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICBnZXRPcHRpb25zKHZhbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdldE9wdGlvbnMoXCJ0aGlzc3RyaW5nc2hvdWxkbmV2ZXJzaG93dXBhbmR0aGVyZWZvcmVjbGVhcnRoZWxpc3RzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gXCJCcmliaW5nIHN0b3JtdHJvb3BlcnMuLi5cIjtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dTZWFyY2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJCgnI3NlYXJjaC10ZW1wbGF0ZScpLmh0bWwoKSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0dXMgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh7c3RhdHVzOiB0aGlzLnN0YXR1c30pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIHZhciBBcHAgPSBuZXcgQXBwVmlldztcblxuICAgIHZhciBnZXRPcHRpb25zID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICQoXCJpbnB1dFt0eXBlPWNoZWNrYm94XVwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGdyb3VwID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb247XG4gICAgICAgICAgICBzd2l0Y2goZ3JvdXApIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwicGVvcGxlXCI6XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgUGVvcGxlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBwZW9wbGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxtc1wiOlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IEZpbG1zKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBmaWxtcztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJzaGlwc1wiOlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IFN0YXJzaGlwcygpO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gc3RhcnNoaXBzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidmVoaWNsZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBWZWhpY2xlcygpO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gdmVoaWNsZXM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVjaWVzXCI6XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgU3BlY2llcygpO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gc3BlY2llcztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBsYW5ldHNcIjpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBQbGFuZXRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBwbGFuZXRzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgICAgICAgICAgIGNvbXBhcmVPcHRpb25zKG9wdGlvbnMsIGNvbGxlY3Rpb24sIGdyb3VwLCB2YWwsIGZ1bmN0aW9uKGVyciwgbykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBJdGVtVmlldygpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnNob3dMaXN0KCQoXCIjXCIgKyBncm91cCksIG8sIGdyb3VwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSXRlbVZpZXcoKTtcbiAgICAgICAgICAgICAgICB2aWV3LnNob3dMaXN0KCQoXCIjXCIgKyBncm91cCksIG9wdGlvbnMsIGdyb3VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb21wYXJlT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNvbGxlY3Rpb24sIGdyb3VwLCB2YWwsIGNiKSB7XG4gICAgICAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbihvcHRpb24sIGluZGV4KSB7XG4gICAgICAgICAgICBjb21wYXJlKGdyb3VwLCBvcHRpb24sIHZhbCwgZnVuY3Rpb24oZXJyLCBhZGQpIHtcbiAgICAgICAgICAgICAgICBpZihhZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hZGQob3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoKytpbmRleCA9PT0gY29sbGVjdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY29tcGFyZSA9IGZ1bmN0aW9uKGdyb3VwLCBvcHRpb24sIHZhbCwgY2IpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZTtcbiAgICAgICAgaWYoZ3JvdXAgPT09IFwiZmlsbXNcIikge1xuICAgICAgICAgICAgYXR0cmlidXRlID0gb3B0aW9uLmdldChcInRpdGxlXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGUgPSBvcHRpb24uZ2V0KFwibmFtZVwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGF0dHJpYnV0ZS5pbmRleE9mKHZhbC50b0xvd2VyQ2FzZSgpKSAhPSAtMSkge1xuICAgICAgICAgICAgY2IobnVsbCwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYihudWxsLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGxvYWRGcm9tQXBpID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgZ3JvdXApIHtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCAmJiByZXF1ZXN0LnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIGdldEFycmF5RnJvbUFwaShjb2xsZWN0aW9uLCBncm91cCwgZGF0YSwgKGRhdGFbXCJjb3VudFwiXSAvIDEwKSwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmVMb2FkaW5nKGdyb3VwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIFwiaHR0cDovL3N3YXBpLmNvL2FwaS9cIiArIGdyb3VwICsgXCIvP2Zvcm1hdD1qc29uXCIsIHRydWUpO1xuICAgICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICB9O1xuXG4gICAgdmFyIGxvYWRlZCA9IFtdO1xuICAgIHZhciBkb25lTG9hZGluZyA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIGxvYWRlZC5wdXNoKGdyb3VwKTtcbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgQXBwLnN0YXR1cyA9IFwiRmVlZGluZyBDaGV3aWUuLi5cIjtcbiAgICAgICAgICAgIEFwcC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihsb2FkZWQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBBcHAuc3RhdHVzID0gXCJTcGVsbGNoZWNraW5nIFlvZGEuLi5cIjtcbiAgICAgICAgICAgIEFwcC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihsb2FkZWQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICBBcHAuc3RhdHVzID0gXCJIdWdnaW5nIERhcnRoIFZhZGVyLi4uXCI7XG4gICAgICAgICAgICBBcHAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgQXBwLnN0YXR1cyA9IFwiS2lzc2luZyBQcmluY2VzcyBMZWlhLi4uXCI7XG4gICAgICAgICAgICBBcHAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgICAgQXBwLnN0YXR1cyA9IFwiUG9kcmFjaW5nIHdpdGggQW5ha2luLi4uXCI7XG4gICAgICAgICAgICBBcHAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gNikge1xuICAgICAgICAgICAgbWFrZUNvbGxlY3Rpb25zKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG1ha2VDb2xsZWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBsb2FkZWQuZm9yRWFjaChmdW5jdGlvbihncm91cCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbGxlY3RGb3JHcm91cChncm91cCwgZnVuY3Rpb24oZXJyLCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYoKytpbmRleCA9PT0gbG9hZGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBBcHAuc2hvd1NlYXJjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGNvbGxlY3RGb3JHcm91cCA9IGZ1bmN0aW9uKGdyb3VwLCBjYikge1xuICAgICAgICBzd2l0Y2goZ3JvdXApIHtcbiAgICAgICAgICAgIGNhc2UgXCJwZW9wbGVcIjpcbiAgICAgICAgICAgICAgICBwZW9wbGUuZm9yRWFjaChmdW5jdGlvbihwZXJzb24sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3RGb3JQZXJzb24ocGVyc29uLCBmdW5jdGlvbihlcnIsIHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCsraW5kZXggPT09IHBlb3BsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBwZW9wbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJmaWxtc1wiOlxuICAgICAgICAgICAgICAgIGZpbG1zLmZvckVhY2goZnVuY3Rpb24oZmlsbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdEZvckZpbG0oZmlsbSwgZnVuY3Rpb24oZXJyLCBmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigrK2luZGV4ID09PSBmaWxtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBmaWxtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0YXJzaGlwc1wiOlxuICAgICAgICAgICAgICAgIHN0YXJzaGlwcy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXJzaGlwLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yU3RhcnNoaXAoc3RhcnNoaXAsIGZ1bmN0aW9uKGVyciwgcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoKytpbmRleCA9PT0gc3RhcnNoaXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHN0YXJzaGlwcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInZlaGljbGVzXCI6XG4gICAgICAgICAgICAgICAgdmVoaWNsZXMuZm9yRWFjaChmdW5jdGlvbih2ZWhpY2xlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yVmVoaWNsZSh2ZWhpY2xlLCBmdW5jdGlvbihlcnIsIHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCsraW5kZXggPT09IHZlaGljbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHZlaGljbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3BlY2llc1wiOlxuICAgICAgICAgICAgICAgIHNwZWNpZXMuZm9yRWFjaChmdW5jdGlvbihyYWNlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yUmFjZShyYWNlLCBmdW5jdGlvbihlcnIsIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCsraW5kZXggPT09IHNwZWNpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgc3BlY2llcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBsYW5ldHNcIjpcbiAgICAgICAgICAgICAgICBwbGFuZXRzLmZvckVhY2goZnVuY3Rpb24ocGxhbmV0LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yUGxhbmV0KHBsYW5ldCwgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigrK2luZGV4ID09PSBwbGFuZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHBsYW5ldHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY29sbGVjdCA9IGZ1bmN0aW9uKGl0ZW0sIGF0dHJpYnV0ZSwgY29sbGVjdGlvbiwgY2IpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IGl0ZW0uZ2V0KGF0dHJpYnV0ZSk7XG4gICAgICAgIHZhciBvYmplY3RzO1xuICAgICAgICBzd2l0Y2goY29sbGVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBwZW9wbGU6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBQZW9wbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZmlsbXM6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBGaWxtcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzdGFyc2hpcHM6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBTdGFyc2hpcHMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdmVoaWNsZXM6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBWZWhpY2xlcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzcGVjaWVzOlxuICAgICAgICAgICAgICAgIG9iamVjdHMgPSBuZXcgU3BlY2llcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBwbGFuZXRzOlxuICAgICAgICAgICAgICAgIG9iamVjdHMgPSBuZXcgUGxhbmV0cygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmKHR5cGVvZiB2YWx1ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBnZXRWYWx1ZUZyb21Db2xsZWN0aW9uKHZhbHVlcywgY29sbGVjdGlvbiwgZnVuY3Rpb24oZXJyLCBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jYih0cnVlLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldChhdHRyaWJ1dGUsIG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYodmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUNvbGxlY3Rpb24odmFsdWUsIGNvbGxlY3Rpb24sIGZ1bmN0aW9uKGVyciwgb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jYih0cnVlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMuYWRkKG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0cy5sZW5ndGggPT09IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0KGF0dHJpYnV0ZSwgb2JqZWN0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYihudWxsLCBpdGVtKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0VmFsdWVGcm9tQ29sbGVjdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLCBjb2xsZWN0aW9uLCBjYikge1xuICAgICAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmKGl0ZW0uZ2V0KCd1cmwnKSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCsraW5kZXggPT09IGNvbGxlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY29sbGVjdEZvclBlcnNvbiA9IGZ1bmN0aW9uKHBlcnNvbiwgY2IpIHtcbiAgICAgICAgY29sbGVjdChwZXJzb24sIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcCkge1xuICAgICAgICAgICAgcGVyc29uID0gcDtcbiAgICAgICAgICAgIGNvbGxlY3QocGVyc29uLCBcInNwZWNpZXNcIiwgc3BlY2llcywgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICAgICAgcGVyc29uID0gcDtcbiAgICAgICAgICAgICAgICBjb2xsZWN0KHBlcnNvbiwgXCJ2ZWhpY2xlc1wiLCB2ZWhpY2xlcywgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbiA9IHA7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3QocGVyc29uLCBcInN0YXJzaGlwc1wiLCBzdGFyc2hpcHMsIGZ1bmN0aW9uKGVyciwgcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc29uID0gcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3QocGVyc29uLCBcImhvbWV3b3JsZFwiLCBwbGFuZXRzLCBmdW5jdGlvbihlcnIsIHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb24gPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHBlcnNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb2xsZWN0Rm9yRmlsbSA9IGZ1bmN0aW9uKGZpbG0sIGNiKSB7XG4gICAgICAgIGNvbGxlY3QoZmlsbSwgXCJjaGFyYWN0ZXJzXCIsIHBlb3BsZSwgZnVuY3Rpb24oZXJyLCBmKSB7XG4gICAgICAgICAgICBmaWxtID0gZjtcbiAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJwbGFuZXRzXCIsIHBsYW5ldHMsIGZ1bmN0aW9uKGVyciwgZikge1xuICAgICAgICAgICAgICAgIGZpbG0gPSBmO1xuICAgICAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJzdGFyc2hpcHNcIiwgc3RhcnNoaXBzLCBmdW5jdGlvbihlcnIsIGYpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbSA9IGY7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJ2ZWhpY2xlc1wiLCB2ZWhpY2xlcywgZnVuY3Rpb24oZXJyLCBmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxtID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJzcGVjaWVzXCIsIHNwZWNpZXMsIGZ1bmN0aW9uKGVyciwgZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbG0gPSBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGZpbG0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb2xsZWN0Rm9yU3RhcnNoaXAgPSBmdW5jdGlvbihzdGFyc2hpcCwgY2IpIHtcbiAgICAgICAgY29sbGVjdChzdGFyc2hpcCwgXCJwaWxvdHNcIiwgcGVvcGxlLCBmdW5jdGlvbihlcnIsIHMpIHtcbiAgICAgICAgICAgIHN0YXJzaGlwID0gcztcbiAgICAgICAgICAgIGNvbGxlY3Qoc3RhcnNoaXAsIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcykge1xuICAgICAgICAgICAgICAgIHN0YXJzaGlwID0gcztcbiAgICAgICAgICAgICAgICBjYihudWxsLCBzdGFyc2hpcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb2xsZWN0Rm9yVmVoaWNsZSA9IGZ1bmN0aW9uKHZlaGljbGUsIGNiKSB7XG4gICAgICAgIGNvbGxlY3QodmVoaWNsZSwgXCJwaWxvdHNcIiwgcGVvcGxlLCBmdW5jdGlvbihlcnIsIHYpIHtcbiAgICAgICAgICAgIHZlaGljbGUgPSB2O1xuICAgICAgICAgICAgY29sbGVjdCh2ZWhpY2xlLCBcImZpbG1zXCIsIGZpbG1zLCBmdW5jdGlvbihlcnIsIHYpIHtcbiAgICAgICAgICAgICAgICB2ZWhpY2xlID0gdjtcbiAgICAgICAgICAgICAgICBjYihudWxsLCB2ZWhpY2xlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGNvbGxlY3RGb3JSYWNlID0gZnVuY3Rpb24ocmFjZSwgY2IpIHtcbiAgICAgICAgY29sbGVjdChyYWNlLCBcInBlb3BsZVwiLCBwZW9wbGUsIGZ1bmN0aW9uKGVyciwgcikge1xuICAgICAgICAgICAgcmFjZSA9IHI7XG4gICAgICAgICAgICBjb2xsZWN0KHJhY2UsIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcikge1xuICAgICAgICAgICAgICAgIHJhY2UgPSByO1xuICAgICAgICAgICAgICAgIGNiKG51bGwsIHJhY2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY29sbGVjdEZvclBsYW5ldCA9IGZ1bmN0aW9uKHBsYW5ldCwgY2IpIHtcbiAgICAgICAgY29sbGVjdChwbGFuZXQsIFwicmVzaWRlbnRzXCIsIHBlb3BsZSwgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICBwbGFuZXQgPSBwO1xuICAgICAgICAgICAgY29sbGVjdChwbGFuZXQsIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcCkge1xuICAgICAgICAgICAgICAgIHBsYW5ldCA9IHA7XG4gICAgICAgICAgICAgICAgY2IobnVsbCwgcGxhbmV0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgbG9hZEZyb21BcGkocGVvcGxlLCBcInBlb3BsZVwiKTtcbiAgICBsb2FkRnJvbUFwaShmaWxtcywgXCJmaWxtc1wiKTtcbiAgICBsb2FkRnJvbUFwaShzdGFyc2hpcHMsIFwic3RhcnNoaXBzXCIpO1xuICAgIGxvYWRGcm9tQXBpKHZlaGljbGVzLCBcInZlaGljbGVzXCIpO1xuICAgIGxvYWRGcm9tQXBpKHNwZWNpZXMsIFwic3BlY2llc1wiKTtcbiAgICBsb2FkRnJvbUFwaShwbGFuZXRzLCBcInBsYW5ldHNcIik7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
