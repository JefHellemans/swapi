!function(){Person=Backbone.Model.extend({defaults:function(){return{name:"",height:"",mass:"",hair_color:"",skin_color:"",eye_color:"",birth_year:"",gender:"",homeworld:"",films:[],species:[],vehicles:[],starships:[],created:"",edited:"",url:""}}}),People=Backbone.Collection.extend({model:Person,localStorage:new Store("people-backbone")}),Film=Backbone.Model.extend({defaults:function(){return{title:"",episode_id:"",opening_crawl:"",director:"",producer:"",release_date:"",characters:[],planets:[],starships:[],vehicles:[],species:[],created:"",edited:"",url:""}}}),Films=Backbone.Collection.extend({model:Film,localStorage:new Store("films-backbone")}),Starship=Backbone.Model.extend({defaults:function(){return{name:"",model:"",manufacturer:"",cost_in_credits:"",length:"",max_atmosphering_speed:"",crew:"",passengers:"",cargo_capacity:"",consumables:"",hyperdrive_rating:"",MGLT:"",starship_class:"",pilots:[],films:[],created:"",edited:"",url:""}}}),Starships=Backbone.Collection.extend({model:Starship,localStorage:new Store("starships-backbone")}),Vehicle=Backbone.Model.extend({defaults:function(){return{name:"",model:"",manufacturer:"",cost_in_credits:"",length:"",max_atmosphering_speed:"",crew:"",passengers:"",cargo_capacity:"",consumables:"",vehicle_class:"",pilots:[],films:[],created:"",edited:"",url:""}}}),Vehicles=Backbone.Collection.extend({model:Vehicle,localStorage:new Store("vehicles-backbone")}),Race=Backbone.Model.extend({defaults:function(){return{name:"",classification:"",designation:"",average_height:"",skin_colors:"",hair_colors:"",eye_colors:"",average_lifespan:"",homeworld:"",language:"",people:[],films:[],created:"",edited:"",url:""}}}),Species=Backbone.Collection.extend({model:Race,localStorage:new Store("species-backbone")}),Planet=Backbone.Model.extend({defaults:function(){return{name:"",rotation_period:"",orbital_period:"",diameter:"",climate:"",gravity:"",terrain:"",surface_water:"",population:"",residents:[],films:[],created:"",edited:"",url:""}}}),Planets=Backbone.Collection.extend({model:Planet,localStorage:new Store("planets-backbone")});var e=new People,t=new Films,s=new Starships,n=new Vehicles,l=new Species,a=new Planets,i=function(e,t,s,n,l){o(e,t,s.results,function(e,t){2>=n&&l(null,t)});for(var a=2;n+1>=a;a++)r(t,a,function(s,a,i){o(e,t,a.results,function(e,t){i>=n&&l(null,t)})})},r=function(e,t,s){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=JSON.parse(n.responseText);s(null,e,t)}},n.open("GET","http://swapi.co/api/"+e+"/?page="+t+"&format=json",!0),n.send()},o=function(e,t,s,n){for(var l=s.length,a=0;l>a;a++)c(t,a,s[a],function(t,s,a){t?n(!0,null):(e.add(s),++a==l&&n(null,e))})},c=function(e,t,s,n){switch(e){case"people":p(s,function(e,s){n(null,s,t)});break;case"films":u(s,function(e,s){n(null,s,t)});break;case"starships":h(s,function(e,s){n(null,s,t)});break;case"vehicles":d(s,function(e,s){n(null,s,t)});break;case"species":m(s,function(e,s){n(null,s,t)});break;case"planets":f(s,function(e,s){n(null,s,t)});break;default:n(!0,null,t)}},p=function(e,t){if(e.name){var s=new Person;s.set("name",e.name),s.set("height",e.height),s.set("mass",e.mass),s.set("hair_color",e.hair_color),s.set("skin_color",e.skin_color),s.set("eye_color",e.eye_color),s.set("birth_year",e.birth_year),s.set("gender",e.gender),s.set("homeworld",e.homeworld),s.set("films",e.films),s.set("species",e.species),s.set("vehicles",e.vehicles),s.set("starships",e.starships),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},u=function(e,t){if(e.title){var s=new Film;s.set("title",e.title),s.set("episode_id",e.episode_id),s.set("opening_crawl",e.opening_crawl),s.set("director",e.director),s.set("producer",e.producer),s.set("release_date",e.release_date),s.set("characters",e.characters),s.set("planets",e.planets),s.set("starships",e.starships),s.set("vehicles",e.vehicles),s.set("species",e.species),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},h=function(e,t){if(e.name){var s=new Starship;s.set("name",e.name),s.set("model",e.model),s.set("manufacturer",e.manufacturer),s.set("cost_in_credits",e.cost_in_credits),s.set("length",e.length),s.set("max_atmosphering_speed",e.max_atmosphering_speed),s.set("crew",e.crew),s.set("passengers",e.passengers),s.set("cargo_capacity",e.cargo_capacity),s.set("consumables",e.consumables),s.set("hyperdrive_rating",e.hyperdrive_rating),s.set("MGLT",e.MGLT),s.set("starship_class",e.starship_class),s.set("pilots",e.pilots),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},d=function(e,t){if(e.name){var s=new Vehicle;s.set("name",e.name),s.set("model",e.model),s.set("manufacturer",e.manufacturer),s.set("cost_in_credits",e.cost_in_credits),s.set("length",e.length),s.set("max_atmosphering_speed",e.max_atmosphering_speed),s.set("crew",e.crew),s.set("passengers",e.passengers),s.set("cargo_capacity",e.cargo_capacity),s.set("consumables",e.consumables),s.set("vehicle_class",e.vehicle_class),s.set("pilots",e.pilots),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},m=function(e,t){if(e.name){var s=new Race;s.set("name",e.name),s.set("classification",e.classification),s.set("designation",e.designation),s.set("average_height",e.average_height),s.set("skin_colors",e.skin_colors),s.set("hair_colors",e.hair_colors),s.set("eye_colors",e.eye_colors),s.set("average_lifespan",e.average_lifespan),s.set("homeworld",e.homeworld),s.set("language",e.language),s.set("people",e.people),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},f=function(e,t){if(e.name){var s=new Planet;s.set("name",e.name),s.set("rotation_period",e.rotation_period),s.set("orbital_period",e.orbital_period),s.set("diameter",e.diameter),s.set("climate",e.climate),s.set("gravity",e.gravity),s.set("terrain",e.terrain),s.set("surface_water",e.surface_water),s.set("population",e.population),s.set("residents",e.residents),s.set("films",e.films),s.set("created",e.created),s.set("edited",e.edited),s.set("url",e.url),t(null,s)}else t(!0,null)},g=Backbone.View.extend({tagName:"section",template:_.template("<%- name %>"),events:{},makeList:function(e,t,s){var n=new w;n.showList(e,t,s)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),w=Backbone.View.extend({tagName:"li",template:_.template("<a href='#'><%- name %></a>"),group:"",events:{"click a":"showDetails"},showList:function(e,t,s){if(e.empty(),t instanceof Backbone.Model){var n=new w({model:t});n.group=s,"films"==s&&(n.template=_.template("<a href='#'><%- title %></a>"));var l=n.render().el;e.append(l),$(l).hide().slideDown(200)}else t instanceof Backbone.Collection&&t.forEach(function(t,n){if(5>n){var l=new w({model:t});l.group=s,"films"==s&&(l.template=_.template("<a href='#'><%- title %></a>"));var a=l.render().el;e.append(a),$(a).hide().slideDown(200)}})},showDetails:function(e){e.preventDefault(),document.getElementById("search").value="",v.search();var t=$("#result");t.empty();var s=new g({model:this.model});switch(this.group){case"people":s.template=_.template($("#person-template").html()),t.append(s.render().el),s.makeList($("#result .homeworld"),this.model.get("homeworld"),"planets"),s.makeList($("#result .films"),this.model.get("films"),"films"),s.makeList($("#result .species"),this.model.get("species"),"species"),s.makeList($("#result .vehicles"),this.model.get("vehicles"),"vehicles"),s.makeList($("#result .starships"),this.model.get("starships"),"starships");break;case"films":s.template=_.template($("#film-template").html()),t.append(s.render().el),s.makeList($("#result .characters"),this.model.get("characters"),"people"),s.makeList($("#result .planets"),this.model.get("planets"),"planets"),s.makeList($("#result .starships"),this.model.get("starships"),"starships"),s.makeList($("#result .vehicles"),this.model.get("vehicles"),"vehicles"),s.makeList($("#result .species"),this.model.get("species"),"species");break;case"starships":s.template=_.template($("#starship-template").html()),t.append(s.render().el),s.makeList($("#result .pilots"),this.model.get("pilots"),"people"),s.makeList($("#result .films"),this.model.get("films"),"films");break;case"vehicles":s.template=_.template($("#vehicle-template").html()),t.append(s.render().el),s.makeList($("#result .pilots"),this.model.get("pilots"),"people"),s.makeList($("#result .films"),this.model.get("films"),"films");break;case"species":s.template=_.template($("#race-template").html()),t.append(s.render().el),s.makeList($("#result .people"),this.model.get("people"),"people"),s.makeList($("#result .films"),this.model.get("films"),"films");break;case"planets":s.template=_.template($("#planet-template").html()),t.append(s.render().el),s.makeList($("#result .residents"),this.model.get("residents"),"people"),s.makeList($("#result .films"),this.model.get("films"),"films")}},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),k=Backbone.View.extend({el:$("#app"),template:_.template($("#loading-template").html()),status:"",events:{"keypress #search":"preventSend","keyup #search":"search",'click [type="checkbox"]':"search"},preventSend:function(e){13===e.which&&e.preventDefault()},search:function(){var e=document.getElementById("search").value;b(e.length>=1?e:"thisstringshouldnevershowupandthereforeclearthelists")},initialize:function(){this.status="Bribing stormtroopers...",this.render()},showSearch:function(){this.status="",this.template=_.template($("#search-template").html()),this.render()},render:function(){""!=this.status?this.$el.html(this.template({status:this.status})):(this.$el.html(this.template()),$("#options h2").slideUp(0))}}),v=new k,b=function(i){$("input[type=checkbox]").each(function(){var r,o,c=$(this).val();switch(c){case"people":r=new People,o=e;break;case"films":r=new Films,o=t;break;case"starships":r=new Starships,o=s;break;case"vehicles":r=new Vehicles,o=n;break;case"species":r=new Species,o=l;break;case"planets":r=new Planets,o=a}if($(this).is(":checked"))y(r,o,c,i,function(e,t){0===t.length?$("h2."+c).slideUp(200):$("h2."+c).slideDown(200);var s=new w;s.showList($("#"+c),t,c)});else{$("h2."+c).slideUp(200);var p=new w;p.showList($("#"+c),r,c)}})},y=function(e,t,s,n,l){t.forEach(function(a,i){S(s,a,n,function(s,n){n&&e.add(a),++i===t.length&&l(null,e)})})},S=function(e,t,s,n){var l;l="films"===e?t.get("title").toLowerCase():t.get("name").toLowerCase(),-1!=l.indexOf(s.toLowerCase())?n(null,!0):n(null,!1)},L=function(e,t){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var n=JSON.parse(s.responseText);i(e,t,n,n.count/10,function(e,s){B(t)})}},s.open("GET","http://swapi.co/api/"+t+"/?format=json",!0),s.send()},x=[],B=function(e){x.push(e),1===x.length&&(v.status="Feeding Chewie...",v.render()),2===x.length&&(v.status="Spellchecking Yoda...",v.render()),3===x.length&&(v.status="Hugging Darth Vader...",v.render()),4===x.length&&(v.status="Kissing Princess Leia...",v.render()),5===x.length&&(v.status="Podracing with Anakin...",v.render()),6===x.length&&P()},P=function(){x.forEach(function(e,t){E(e,function(e,s){++t===x.length&&v.showSearch()})})},E=function(i,r){switch(i){case"people":e.forEach(function(t,s){V(t,function(t,n){++s===e.length&&r(null,e)})});break;case"films":t.forEach(function(e,s){D(e,function(e,n){++s===t.length&&r(null,t)})});break;case"starships":s.forEach(function(e,t){F(e,function(e,n){++t===s.length&&r(null,s)})});break;case"vehicles":n.forEach(function(e,t){T(e,function(e,s){++t===n.length&&r(null,n)})});break;case"species":l.forEach(function(e,t){N(e,function(e,s){++t===l.length&&r(null,l)})});break;case"planets":a.forEach(function(e,t){G(e,function(e,s){++t===a.length&&r(null,a)})})}},M=function(i,r,o,c){var p,u=i.get(r);switch(o){case e:p=new People;break;case t:p=new Films;break;case s:p=new Starships;break;case n:p=new Vehicles;break;case l:p=new Species;break;case a:p=new Planets}"string"==typeof u?C(u,o,function(e,t){e||(i.set(r,t),c(null,i))}):u.length>0?u.forEach(function(e,t){C(e,o,function(e,t){e||p.add(t),p.length===u.length&&(i.set(r,p),c(null,i))})}):c(null,i)},C=function(e,t,s){t.forEach(function(n,l){n.get("url")===e&&s(null,n),++l===t.length&&s(!0,null)})},V=function(e,i){M(e,"films",t,function(t,r){e=r,M(e,"species",l,function(t,l){e=l,M(e,"vehicles",n,function(t,n){e=n,M(e,"starships",s,function(t,s){e=s,M(e,"homeworld",a,function(t,s){e=s,i(null,e)})})})})})},D=function(t,i){M(t,"characters",e,function(e,r){t=r,M(t,"planets",a,function(e,a){t=a,M(t,"starships",s,function(e,s){t=s,M(t,"vehicles",n,function(e,s){t=s,M(t,"species",l,function(e,s){t=s,i(null,t)})})})})})},F=function(s,n){M(s,"pilots",e,function(e,l){s=l,M(s,"films",t,function(e,t){s=t,n(null,s)})})},T=function(s,n){M(s,"pilots",e,function(e,l){s=l,M(s,"films",t,function(e,t){s=t,n(null,s)})})},N=function(s,n){M(s,"people",e,function(e,l){s=l,M(s,"films",t,function(e,t){s=t,n(null,s)})})},G=function(s,n){M(s,"residents",e,function(e,l){s=l,M(s,"films",t,function(e,t){s=t,n(null,s)})})};L(e,"people"),L(t,"films"),L(s,"starships"),L(n,"vehicles"),L(l,"species"),L(a,"planets")}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiUGVyc29uIiwiQmFja2JvbmUiLCJNb2RlbCIsImV4dGVuZCIsImRlZmF1bHRzIiwibmFtZSIsImhlaWdodCIsIm1hc3MiLCJoYWlyX2NvbG9yIiwic2tpbl9jb2xvciIsImV5ZV9jb2xvciIsImJpcnRoX3llYXIiLCJnZW5kZXIiLCJob21ld29ybGQiLCJmaWxtcyIsInNwZWNpZXMiLCJ2ZWhpY2xlcyIsInN0YXJzaGlwcyIsImNyZWF0ZWQiLCJlZGl0ZWQiLCJ1cmwiLCJQZW9wbGUiLCJDb2xsZWN0aW9uIiwibW9kZWwiLCJsb2NhbFN0b3JhZ2UiLCJTdG9yZSIsIkZpbG0iLCJ0aXRsZSIsImVwaXNvZGVfaWQiLCJvcGVuaW5nX2NyYXdsIiwiZGlyZWN0b3IiLCJwcm9kdWNlciIsInJlbGVhc2VfZGF0ZSIsImNoYXJhY3RlcnMiLCJwbGFuZXRzIiwiRmlsbXMiLCJTdGFyc2hpcCIsIm1hbnVmYWN0dXJlciIsImNvc3RfaW5fY3JlZGl0cyIsImxlbmd0aCIsIm1heF9hdG1vc3BoZXJpbmdfc3BlZWQiLCJjcmV3IiwicGFzc2VuZ2VycyIsImNhcmdvX2NhcGFjaXR5IiwiY29uc3VtYWJsZXMiLCJoeXBlcmRyaXZlX3JhdGluZyIsIk1HTFQiLCJzdGFyc2hpcF9jbGFzcyIsInBpbG90cyIsIlN0YXJzaGlwcyIsIlZlaGljbGUiLCJ2ZWhpY2xlX2NsYXNzIiwiVmVoaWNsZXMiLCJSYWNlIiwiY2xhc3NpZmljYXRpb24iLCJkZXNpZ25hdGlvbiIsImF2ZXJhZ2VfaGVpZ2h0Iiwic2tpbl9jb2xvcnMiLCJoYWlyX2NvbG9ycyIsImV5ZV9jb2xvcnMiLCJhdmVyYWdlX2xpZmVzcGFuIiwibGFuZ3VhZ2UiLCJwZW9wbGUiLCJTcGVjaWVzIiwiUGxhbmV0Iiwicm90YXRpb25fcGVyaW9kIiwib3JiaXRhbF9wZXJpb2QiLCJkaWFtZXRlciIsImNsaW1hdGUiLCJncmF2aXR5IiwidGVycmFpbiIsInN1cmZhY2Vfd2F0ZXIiLCJwb3B1bGF0aW9uIiwicmVzaWRlbnRzIiwiUGxhbmV0cyIsImdldEFycmF5RnJvbUFwaSIsImNvbGxlY3Rpb24iLCJncm91cCIsImZpcnN0UGFnZSIsImNvdW50IiwiY2IiLCJnZXRBcnJheSIsImVyciIsImNvbCIsImkiLCJnZXRFbGVtZW50RnJvbUFwaSIsImVsZW0iLCJwb3MiLCJnZXRQYWdlIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsIm9wZW4iLCJzZW5kIiwiZWxlbWVudHMiLCJqIiwiZ2V0RWxlbWVudCIsImFkZCIsImNyZWF0ZVBlcnNvbiIsIml0ZW0iLCJjcmVhdGVGaWxtIiwiY3JlYXRlU3RhcnNoaXAiLCJjcmVhdGVWZWhpY2xlIiwiY3JlYXRlUmFjZSIsImNyZWF0ZVBsYW5ldCIsInAiLCJzZXQiLCJmIiwicyIsInYiLCJyIiwiRGV0YWlsVmlldyIsIlZpZXciLCJ0YWdOYW1lIiwidGVtcGxhdGUiLCJfIiwiZXZlbnRzIiwibWFrZUxpc3QiLCJlbGVtZW50IiwidmlldyIsIkl0ZW1WaWV3Iiwic2hvd0xpc3QiLCJyZW5kZXIiLCJ0aGlzIiwiJGVsIiwiaHRtbCIsInRvSlNPTiIsImNsaWNrIGEiLCJlbXB0eSIsImUiLCJlbCIsImFwcGVuZCIsIiQiLCJoaWRlIiwic2xpZGVEb3duIiwiZm9yRWFjaCIsImluZGV4Iiwic2hvd0RldGFpbHMiLCJwcmV2ZW50RGVmYXVsdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsIkFwcCIsInNlYXJjaCIsImNvbnRhaW5lciIsImdldCIsIkFwcFZpZXciLCJrZXlwcmVzcyAjc2VhcmNoIiwia2V5dXAgI3NlYXJjaCIsImNsaWNrIFt0eXBlPVwiY2hlY2tib3hcIl0iLCJwcmV2ZW50U2VuZCIsIndoaWNoIiwidmFsIiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJzaG93U2VhcmNoIiwic2xpZGVVcCIsImVhY2giLCJvcHRpb25zIiwiaXMiLCJjb21wYXJlT3B0aW9ucyIsIm8iLCJvcHRpb24iLCJjb21wYXJlIiwiYXR0cmlidXRlIiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwibG9hZEZyb21BcGkiLCJyZXF1ZXN0IiwiZG9uZUxvYWRpbmciLCJsb2FkZWQiLCJwdXNoIiwibWFrZUNvbGxlY3Rpb25zIiwiY29sbGVjdEZvckdyb3VwIiwicGVyc29uIiwiY29sbGVjdEZvclBlcnNvbiIsImZpbG0iLCJjb2xsZWN0Rm9yRmlsbSIsInN0YXJzaGlwIiwiY29sbGVjdEZvclN0YXJzaGlwIiwidmVoaWNsZSIsImNvbGxlY3RGb3JWZWhpY2xlIiwicmFjZSIsImNvbGxlY3RGb3JSYWNlIiwicGxhbmV0IiwiY29sbGVjdEZvclBsYW5ldCIsImNvbGxlY3QiLCJvYmplY3RzIiwidmFsdWVzIiwiZ2V0VmFsdWVGcm9tQ29sbGVjdGlvbiIsIm9iamVjdCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFQUEsT0FBQUMsU0FBQUMsTUFBQUMsUUFFQUMsU0FBQSxXQUNBLE9BQ0FDLEtBQUEsR0FDQUMsT0FBQSxHQUNBQyxLQUFBLEdBQ0FDLFdBQUEsR0FDQUMsV0FBQSxHQUNBQyxVQUFBLEdBQ0FDLFdBQUEsR0FDQUMsT0FBQSxHQUNBQyxVQUFBLEdBQ0FDLFNBQ0FDLFdBQ0FDLFlBQ0FDLGFBQ0FDLFFBQUEsR0FDQUMsT0FBQSxHQUNBQyxJQUFBLE9BTUFDLE9BQUFwQixTQUFBcUIsV0FBQW5CLFFBRUFvQixNQUFBdkIsT0FDQXdCLGFBQUEsR0FBQUMsT0FBQSxxQkFJQUMsS0FBQXpCLFNBQUFDLE1BQUFDLFFBRUFDLFNBQUEsV0FDQSxPQUNBdUIsTUFBQSxHQUNBQyxXQUFBLEdBQ0FDLGNBQUEsR0FDQUMsU0FBQSxHQUNBQyxTQUFBLEdBQ0FDLGFBQUEsR0FDQUMsY0FDQUMsV0FDQWpCLGFBQ0FELFlBQ0FELFdBQ0FHLFFBQUEsR0FDQUMsT0FBQSxHQUNBQyxJQUFBLE9BTUFlLE1BQUFsQyxTQUFBcUIsV0FBQW5CLFFBRUFv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RSxFQUFBaUMsR0FDQXdFLEVBQUF4RSxFQUNBbkMsRUFBQSxLQUFBMkcsUUFLQUcsRUFBQSxTQUFBRCxFQUFBN0csR0FDQStHLEVBQUFGLEVBQUEsWUFBQS9ILEVBQUEsU0FBQW9CLEVBQUE0QixHQUNBK0UsRUFBQS9FLEVBQ0FpRixFQUFBRixFQUFBLFFBQUEvSyxFQUFBLFNBQUFvRSxFQUFBNEIsR0FDQStFLEVBQUEvRSxFQUNBOUIsRUFBQSxLQUFBNkcsT0FLQWpCLEdBQUE5RyxFQUFBLFVBQ0E4RyxFQUFBOUosRUFBQSxTQUNBOEosRUFBQTNKLEVBQUEsYUFDQTJKLEVBQUE1SixFQUFBLFlBQ0E0SixFQUFBN0osRUFBQSxXQUNBNkosRUFBQTFJLEVBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblxuICAgIFBlcnNvbiA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG5cbiAgICAgICAgZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgICAgIGhlaWdodDogXCJcIixcbiAgICAgICAgICAgICAgICBtYXNzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGhhaXJfY29sb3I6IFwiXCIsXG4gICAgICAgICAgICAgICAgc2tpbl9jb2xvcjogXCJcIixcbiAgICAgICAgICAgICAgICBleWVfY29sb3I6IFwiXCIsXG4gICAgICAgICAgICAgICAgYmlydGhfeWVhcjogXCJcIixcbiAgICAgICAgICAgICAgICBnZW5kZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgaG9tZXdvcmxkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGZpbG1zOiBbXSxcbiAgICAgICAgICAgICAgICBzcGVjaWVzOiBbXSxcbiAgICAgICAgICAgICAgICB2ZWhpY2xlczogW10sXG4gICAgICAgICAgICAgICAgc3RhcnNoaXBzOiBbXSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGVkaXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgUGVvcGxlID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuXG4gICAgICAgIG1vZGVsOiBQZXJzb24sXG4gICAgICAgIGxvY2FsU3RvcmFnZTogbmV3IFN0b3JlKFwicGVvcGxlLWJhY2tib25lXCIpXG5cbiAgICB9KTtcblxuICAgIEZpbG0gPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuXG4gICAgICAgIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiXCIsXG4gICAgICAgICAgICAgICAgZXBpc29kZV9pZDogXCJcIixcbiAgICAgICAgICAgICAgICBvcGVuaW5nX2NyYXdsOiBcIlwiLFxuICAgICAgICAgICAgICAgIGRpcmVjdG9yOiBcIlwiLFxuICAgICAgICAgICAgICAgIHByb2R1Y2VyOiBcIlwiLFxuICAgICAgICAgICAgICAgIHJlbGVhc2VfZGF0ZTogXCJcIixcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJzOiBbXSxcbiAgICAgICAgICAgICAgICBwbGFuZXRzOiBbXSxcbiAgICAgICAgICAgICAgICBzdGFyc2hpcHM6IFtdLFxuICAgICAgICAgICAgICAgIHZlaGljbGVzOiBbXSxcbiAgICAgICAgICAgICAgICBzcGVjaWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGVkaXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgRmlsbXMgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgICAgICAgbW9kZWw6IEZpbG0sXG4gICAgICAgIGxvY2FsU3RvcmFnZTogbmV3IFN0b3JlKFwiZmlsbXMtYmFja2JvbmVcIilcblxuICAgIH0pO1xuXG4gICAgU3RhcnNoaXAgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuXG4gICAgICAgIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCJcIixcbiAgICAgICAgICAgICAgICBtYW51ZmFjdHVyZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgY29zdF9pbl9jcmVkaXRzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGxlbmd0aDogXCJcIixcbiAgICAgICAgICAgICAgICBtYXhfYXRtb3NwaGVyaW5nX3NwZWVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNyZXc6IFwiXCIsXG4gICAgICAgICAgICAgICAgcGFzc2VuZ2VyczogXCJcIixcbiAgICAgICAgICAgICAgICBjYXJnb19jYXBhY2l0eTogXCJcIixcbiAgICAgICAgICAgICAgICBjb25zdW1hYmxlczogXCJcIixcbiAgICAgICAgICAgICAgICBoeXBlcmRyaXZlX3JhdGluZzogXCJcIixcbiAgICAgICAgICAgICAgICBNR0xUOiBcIlwiLFxuICAgICAgICAgICAgICAgIHN0YXJzaGlwX2NsYXNzOiBcIlwiLFxuICAgICAgICAgICAgICAgIHBpbG90czogW10sXG4gICAgICAgICAgICAgICAgZmlsbXM6IFtdLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZWRpdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBTdGFyc2hpcHMgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgICAgICAgbW9kZWw6IFN0YXJzaGlwLFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IG5ldyBTdG9yZShcInN0YXJzaGlwcy1iYWNrYm9uZVwiKVxuXG4gICAgfSk7XG5cbiAgICBWZWhpY2xlID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcblxuICAgICAgICBkZWZhdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiXCIsXG4gICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNvc3RfaW5fY3JlZGl0czogXCJcIixcbiAgICAgICAgICAgICAgICBsZW5ndGg6IFwiXCIsXG4gICAgICAgICAgICAgICAgbWF4X2F0bW9zcGhlcmluZ19zcGVlZDogXCJcIixcbiAgICAgICAgICAgICAgICBjcmV3OiBcIlwiLFxuICAgICAgICAgICAgICAgIHBhc3NlbmdlcnM6IFwiXCIsXG4gICAgICAgICAgICAgICAgY2FyZ29fY2FwYWNpdHk6IFwiXCIsXG4gICAgICAgICAgICAgICAgY29uc3VtYWJsZXM6IFwiXCIsXG4gICAgICAgICAgICAgICAgdmVoaWNsZV9jbGFzczogXCJcIixcbiAgICAgICAgICAgICAgICBwaWxvdHM6IFtdLFxuICAgICAgICAgICAgICAgIGZpbG1zOiBbXSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGVkaXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgVmVoaWNsZXMgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgICAgICAgbW9kZWw6IFZlaGljbGUsXG4gICAgICAgIGxvY2FsU3RvcmFnZTogbmV3IFN0b3JlKFwidmVoaWNsZXMtYmFja2JvbmVcIilcblxuICAgIH0pO1xuXG4gICAgUmFjZSA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG5cbiAgICAgICAgZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNsYXNzaWZpY2F0aW9uOiBcIlwiLFxuICAgICAgICAgICAgICAgIGRlc2lnbmF0aW9uOiBcIlwiLFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VfaGVpZ2h0OiBcIlwiLFxuICAgICAgICAgICAgICAgIHNraW5fY29sb3JzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGhhaXJfY29sb3JzOiBcIlwiLFxuICAgICAgICAgICAgICAgIGV5ZV9jb2xvcnM6IFwiXCIsXG4gICAgICAgICAgICAgICAgYXZlcmFnZV9saWZlc3BhbjogXCJcIixcbiAgICAgICAgICAgICAgICBob21ld29ybGQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IFwiXCIsXG4gICAgICAgICAgICAgICAgcGVvcGxlOiBbXSxcbiAgICAgICAgICAgICAgICBmaWxtczogW10sXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICBlZGl0ZWQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgdXJsOiBcIlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBTcGVjaWVzID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuXG4gICAgICAgIG1vZGVsOiBSYWNlLFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IG5ldyBTdG9yZShcInNwZWNpZXMtYmFja2JvbmVcIilcblxuICAgIH0pO1xuXG4gICAgUGxhbmV0ID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcblxuICAgICAgICBkZWZhdWx0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgcm90YXRpb25fcGVyaW9kOiBcIlwiLFxuICAgICAgICAgICAgICAgIG9yYml0YWxfcGVyaW9kOiBcIlwiLFxuICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBcIlwiLFxuICAgICAgICAgICAgICAgIGNsaW1hdGU6IFwiXCIsXG4gICAgICAgICAgICAgICAgZ3Jhdml0eTogXCJcIixcbiAgICAgICAgICAgICAgICB0ZXJyYWluOiBcIlwiLFxuICAgICAgICAgICAgICAgIHN1cmZhY2Vfd2F0ZXI6IFwiXCIsXG4gICAgICAgICAgICAgICAgcG9wdWxhdGlvbjogXCJcIixcbiAgICAgICAgICAgICAgICByZXNpZGVudHM6IFtdLFxuICAgICAgICAgICAgICAgIGZpbG1zOiBbXSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiBcIlwiLFxuICAgICAgICAgICAgICAgIGVkaXRlZDogXCJcIixcbiAgICAgICAgICAgICAgICB1cmw6IFwiXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgUGxhbmV0cyA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcblxuICAgICAgICBtb2RlbDogUGxhbmV0LFxuICAgICAgICBsb2NhbFN0b3JhZ2U6IG5ldyBTdG9yZShcInBsYW5ldHMtYmFja2JvbmVcIilcblxuICAgIH0pO1xuXG4gICAgdmFyIHBlb3BsZSA9IG5ldyBQZW9wbGUoKTtcbiAgICB2YXIgZmlsbXMgPSBuZXcgRmlsbXMoKTtcbiAgICB2YXIgc3RhcnNoaXBzID0gbmV3IFN0YXJzaGlwcygpO1xuICAgIHZhciB2ZWhpY2xlcyA9IG5ldyBWZWhpY2xlcygpO1xuICAgIHZhciBzcGVjaWVzID0gbmV3IFNwZWNpZXMoKTtcbiAgICB2YXIgcGxhbmV0cyA9IG5ldyBQbGFuZXRzKCk7XG5cbiAgICB2YXIgZ2V0QXJyYXlGcm9tQXBpID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgZ3JvdXAsIGZpcnN0UGFnZSwgY291bnQsIGNiKSB7XG4gICAgICAgIGdldEFycmF5KGNvbGxlY3Rpb24sIGdyb3VwLCBmaXJzdFBhZ2VbXCJyZXN1bHRzXCJdLCBmdW5jdGlvbihlcnIsIGNvbCkge1xuICAgICAgICAgICAgaWYoY291bnQgPD0gMikge1xuICAgICAgICAgICAgICAgIGNiKG51bGwsIGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IodmFyIGkgPSAyOyBpIDw9IGNvdW50ICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBnZXRFbGVtZW50RnJvbUFwaShncm91cCwgaSwgZnVuY3Rpb24oZXJyLCBlbGVtLCBwb3MpIHtcbiAgICAgICAgICAgICAgICBnZXRBcnJheShjb2xsZWN0aW9uLCBncm91cCwgZWxlbVtcInJlc3VsdHNcIl0sIGZ1bmN0aW9uKGVyciwgY29sKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHBvcyA+PSBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgY29sKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEVsZW1lbnRGcm9tQXBpID0gZnVuY3Rpb24oZ3JvdXAsIGVsZW0sIGNiKSB7XG4gICAgICAgIHZhciBnZXRQYWdlID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGdldFBhZ2Uub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoZ2V0UGFnZS5yZWFkeVN0YXRlID09IDQgJiYgZ2V0UGFnZS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGdldFBhZ2UucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICBjYihudWxsLCBkYXRhLCBlbGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBnZXRQYWdlLm9wZW4oXCJHRVRcIiwgXCJodHRwOi8vc3dhcGkuY28vYXBpL1wiICsgZ3JvdXAgKyBcIi8/cGFnZT1cIiArIGVsZW0gKyBcIiZmb3JtYXQ9anNvblwiLCB0cnVlKTtcbiAgICAgICAgZ2V0UGFnZS5zZW5kKCk7XG4gICAgfTtcblxuICAgIHZhciBnZXRBcnJheSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGdyb3VwLCBlbGVtZW50cywgY2IpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgY291bnQ7IGorKykge1xuICAgICAgICAgICAgZ2V0RWxlbWVudChncm91cCwgaiwgZWxlbWVudHNbal0sIGZ1bmN0aW9uKGVyciwgZWxlbSwgcG9zKSB7XG4gICAgICAgICAgICAgICAgaWYoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKHRydWUsIG51bGwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uYWRkKGVsZW0pO1xuICAgICAgICAgICAgICAgICAgICBpZigrK3BvcyA9PSBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgY29sbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0RWxlbWVudCA9IGZ1bmN0aW9uKGdyb3VwLCBwb3MsIGVsZW0sIGNiKSB7XG4gICAgICAgIHN3aXRjaChncm91cCkge1xuICAgICAgICAgICAgY2FzZSBcInBlb3BsZVwiOlxuICAgICAgICAgICAgICAgIGNyZWF0ZVBlcnNvbihlbGVtLCBmdW5jdGlvbihlcnIsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgaXRlbSwgcG9zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJmaWxtc1wiOlxuICAgICAgICAgICAgICAgIGNyZWF0ZUZpbG0oZWxlbSwgZnVuY3Rpb24oZXJyLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0sIHBvcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RhcnNoaXBzXCI6XG4gICAgICAgICAgICAgICAgY3JlYXRlU3RhcnNoaXAoZWxlbSwgZnVuY3Rpb24oZXJyLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0sIHBvcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidmVoaWNsZXNcIjpcbiAgICAgICAgICAgICAgICBjcmVhdGVWZWhpY2xlKGVsZW0sIGZ1bmN0aW9uKGVyciwgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtLCBwb3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNwZWNpZXNcIjpcbiAgICAgICAgICAgICAgICBjcmVhdGVSYWNlKGVsZW0sIGZ1bmN0aW9uKGVyciwgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtLCBwb3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBsYW5ldHNcIjpcbiAgICAgICAgICAgICAgICBjcmVhdGVQbGFuZXQoZWxlbSwgZnVuY3Rpb24oZXJyLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0sIHBvcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNiKHRydWUsIG51bGwsIHBvcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVBlcnNvbiA9IGZ1bmN0aW9uKGRhdGEsIGNiKSB7XG4gICAgICAgIGlmKCFkYXRhW1wibmFtZVwiXSkge1xuICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcCA9IG5ldyBQZXJzb24oKTtcbiAgICAgICAgICAgIHAuc2V0KCduYW1lJywgZGF0YVtcIm5hbWVcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2hlaWdodCcsIGRhdGFbXCJoZWlnaHRcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ21hc3MnLCBkYXRhW1wibWFzc1wiXSk7XG4gICAgICAgICAgICBwLnNldCgnaGFpcl9jb2xvcicsIGRhdGFbXCJoYWlyX2NvbG9yXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdza2luX2NvbG9yJywgZGF0YVtcInNraW5fY29sb3JcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2V5ZV9jb2xvcicsIGRhdGFbXCJleWVfY29sb3JcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2JpcnRoX3llYXInLCBkYXRhW1wiYmlydGhfeWVhclwiXSk7XG4gICAgICAgICAgICBwLnNldCgnZ2VuZGVyJywgZGF0YVtcImdlbmRlclwiXSk7XG4gICAgICAgICAgICBwLnNldCgnaG9tZXdvcmxkJywgZGF0YVtcImhvbWV3b3JsZFwiXSk7XG4gICAgICAgICAgICBwLnNldCgnZmlsbXMnLCBkYXRhW1wiZmlsbXNcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3NwZWNpZXMnLCBkYXRhW1wic3BlY2llc1wiXSk7XG4gICAgICAgICAgICBwLnNldCgndmVoaWNsZXMnLCBkYXRhW1widmVoaWNsZXNcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3N0YXJzaGlwcycsIGRhdGFbXCJzdGFyc2hpcHNcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2NyZWF0ZWQnLCBkYXRhW1wiY3JlYXRlZFwiXSk7XG4gICAgICAgICAgICBwLnNldCgnZWRpdGVkJywgZGF0YVtcImVkaXRlZFwiXSk7XG4gICAgICAgICAgICBwLnNldCgndXJsJywgZGF0YVtcInVybFwiXSk7XG4gICAgICAgICAgICBjYihudWxsLCBwKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlRmlsbSA9IGZ1bmN0aW9uKGRhdGEsIGNiKSB7XG4gICAgICAgIGlmKCFkYXRhW1widGl0bGVcIl0pIHtcbiAgICAgICAgICAgIGNiKHRydWUsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGYgPSBuZXcgRmlsbSgpO1xuICAgICAgICAgICAgZi5zZXQoJ3RpdGxlJywgZGF0YVtcInRpdGxlXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdlcGlzb2RlX2lkJywgZGF0YVtcImVwaXNvZGVfaWRcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ29wZW5pbmdfY3Jhd2wnLCBkYXRhW1wib3BlbmluZ19jcmF3bFwiXSk7XG4gICAgICAgICAgICBmLnNldCgnZGlyZWN0b3InLCBkYXRhW1wiZGlyZWN0b3JcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ3Byb2R1Y2VyJywgZGF0YVtcInByb2R1Y2VyXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdyZWxlYXNlX2RhdGUnLCBkYXRhW1wicmVsZWFzZV9kYXRlXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdjaGFyYWN0ZXJzJywgZGF0YVtcImNoYXJhY3RlcnNcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ3BsYW5ldHMnLCBkYXRhW1wicGxhbmV0c1wiXSk7XG4gICAgICAgICAgICBmLnNldCgnc3RhcnNoaXBzJywgZGF0YVtcInN0YXJzaGlwc1wiXSk7XG4gICAgICAgICAgICBmLnNldCgndmVoaWNsZXMnLCBkYXRhW1widmVoaWNsZXNcIl0pO1xuICAgICAgICAgICAgZi5zZXQoJ3NwZWNpZXMnLCBkYXRhW1wic3BlY2llc1wiXSk7XG4gICAgICAgICAgICBmLnNldCgnY3JlYXRlZCcsIGRhdGFbXCJjcmVhdGVkXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCdlZGl0ZWQnLCBkYXRhW1wiZWRpdGVkXCJdKTtcbiAgICAgICAgICAgIGYuc2V0KCd1cmwnLCBkYXRhW1widXJsXCJdKTtcbiAgICAgICAgICAgIGNiKG51bGwsIGYpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVTdGFyc2hpcCA9IGZ1bmN0aW9uKGRhdGEsIGNiKSB7XG4gICAgICAgIGlmKCFkYXRhW1wibmFtZVwiXSkge1xuICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcyA9IG5ldyBTdGFyc2hpcCgpO1xuICAgICAgICAgICAgcy5zZXQoJ25hbWUnLCBkYXRhW1wibmFtZVwiXSk7XG4gICAgICAgICAgICBzLnNldCgnbW9kZWwnLCBkYXRhW1wibW9kZWxcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ21hbnVmYWN0dXJlcicsIGRhdGFbXCJtYW51ZmFjdHVyZXJcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2Nvc3RfaW5fY3JlZGl0cycsIGRhdGFbXCJjb3N0X2luX2NyZWRpdHNcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2xlbmd0aCcsIGRhdGFbXCJsZW5ndGhcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ21heF9hdG1vc3BoZXJpbmdfc3BlZWQnLCBkYXRhW1wibWF4X2F0bW9zcGhlcmluZ19zcGVlZFwiXSk7XG4gICAgICAgICAgICBzLnNldCgnY3JldycsIGRhdGFbXCJjcmV3XCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdwYXNzZW5nZXJzJywgZGF0YVtcInBhc3NlbmdlcnNcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2NhcmdvX2NhcGFjaXR5JywgZGF0YVtcImNhcmdvX2NhcGFjaXR5XCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdjb25zdW1hYmxlcycsIGRhdGFbXCJjb25zdW1hYmxlc1wiXSk7XG4gICAgICAgICAgICBzLnNldCgnaHlwZXJkcml2ZV9yYXRpbmcnLCBkYXRhW1wiaHlwZXJkcml2ZV9yYXRpbmdcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ01HTFQnLCBkYXRhW1wiTUdMVFwiXSk7XG4gICAgICAgICAgICBzLnNldCgnc3RhcnNoaXBfY2xhc3MnLCBkYXRhW1wic3RhcnNoaXBfY2xhc3NcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ3BpbG90cycsIGRhdGFbXCJwaWxvdHNcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2ZpbG1zJywgZGF0YVtcImZpbG1zXCJdKTtcbiAgICAgICAgICAgIHMuc2V0KCdjcmVhdGVkJywgZGF0YVtcImNyZWF0ZWRcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ2VkaXRlZCcsIGRhdGFbXCJlZGl0ZWRcIl0pO1xuICAgICAgICAgICAgcy5zZXQoJ3VybCcsIGRhdGFbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgY2IobnVsbCwgcyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVZlaGljbGUgPSBmdW5jdGlvbihkYXRhLCBjYikge1xuICAgICAgICBpZighZGF0YVtcIm5hbWVcIl0pIHtcbiAgICAgICAgICAgIGNiKHRydWUsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmVoaWNsZSgpO1xuICAgICAgICAgICAgdi5zZXQoJ25hbWUnLCBkYXRhW1wibmFtZVwiXSk7XG4gICAgICAgICAgICB2LnNldCgnbW9kZWwnLCBkYXRhW1wibW9kZWxcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ21hbnVmYWN0dXJlcicsIGRhdGFbXCJtYW51ZmFjdHVyZXJcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ2Nvc3RfaW5fY3JlZGl0cycsIGRhdGFbXCJjb3N0X2luX2NyZWRpdHNcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ2xlbmd0aCcsIGRhdGFbXCJsZW5ndGhcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ21heF9hdG1vc3BoZXJpbmdfc3BlZWQnLCBkYXRhW1wibWF4X2F0bW9zcGhlcmluZ19zcGVlZFwiXSk7XG4gICAgICAgICAgICB2LnNldCgnY3JldycsIGRhdGFbXCJjcmV3XCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdwYXNzZW5nZXJzJywgZGF0YVtcInBhc3NlbmdlcnNcIl0pO1xuICAgICAgICAgICAgdi5zZXQoJ2NhcmdvX2NhcGFjaXR5JywgZGF0YVtcImNhcmdvX2NhcGFjaXR5XCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdjb25zdW1hYmxlcycsIGRhdGFbXCJjb25zdW1hYmxlc1wiXSk7XG4gICAgICAgICAgICB2LnNldCgndmVoaWNsZV9jbGFzcycsIGRhdGFbXCJ2ZWhpY2xlX2NsYXNzXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdwaWxvdHMnLCBkYXRhW1wicGlsb3RzXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdmaWxtcycsIGRhdGFbXCJmaWxtc1wiXSk7XG4gICAgICAgICAgICB2LnNldCgnY3JlYXRlZCcsIGRhdGFbXCJjcmVhdGVkXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCdlZGl0ZWQnLCBkYXRhW1wiZWRpdGVkXCJdKTtcbiAgICAgICAgICAgIHYuc2V0KCd1cmwnLCBkYXRhW1widXJsXCJdKTtcbiAgICAgICAgICAgIGNiKG51bGwsIHYpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVSYWNlID0gZnVuY3Rpb24oZGF0YSwgY2IpIHtcbiAgICAgICAgaWYoIWRhdGFbXCJuYW1lXCJdKSB7XG4gICAgICAgICAgICBjYih0cnVlLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciByID0gbmV3IFJhY2UoKTtcbiAgICAgICAgICAgIHIuc2V0KCduYW1lJywgZGF0YVtcIm5hbWVcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2NsYXNzaWZpY2F0aW9uJywgZGF0YVtcImNsYXNzaWZpY2F0aW9uXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdkZXNpZ25hdGlvbicsIGRhdGFbXCJkZXNpZ25hdGlvblwiXSk7XG4gICAgICAgICAgICByLnNldCgnYXZlcmFnZV9oZWlnaHQnLCBkYXRhW1wiYXZlcmFnZV9oZWlnaHRcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ3NraW5fY29sb3JzJywgZGF0YVtcInNraW5fY29sb3JzXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdoYWlyX2NvbG9ycycsIGRhdGFbXCJoYWlyX2NvbG9yc1wiXSk7XG4gICAgICAgICAgICByLnNldCgnZXllX2NvbG9ycycsIGRhdGFbXCJleWVfY29sb3JzXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdhdmVyYWdlX2xpZmVzcGFuJywgZGF0YVtcImF2ZXJhZ2VfbGlmZXNwYW5cIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2hvbWV3b3JsZCcsIGRhdGFbXCJob21ld29ybGRcIl0pO1xuICAgICAgICAgICAgci5zZXQoJ2xhbmd1YWdlJywgZGF0YVtcImxhbmd1YWdlXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdwZW9wbGUnLCBkYXRhW1wicGVvcGxlXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdmaWxtcycsIGRhdGFbXCJmaWxtc1wiXSk7XG4gICAgICAgICAgICByLnNldCgnY3JlYXRlZCcsIGRhdGFbXCJjcmVhdGVkXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCdlZGl0ZWQnLCBkYXRhW1wiZWRpdGVkXCJdKTtcbiAgICAgICAgICAgIHIuc2V0KCd1cmwnLCBkYXRhW1widXJsXCJdKTtcbiAgICAgICAgICAgIGNiKG51bGwsIHIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVQbGFuZXQgPSBmdW5jdGlvbihkYXRhLCBjYikge1xuICAgICAgICBpZighZGF0YVtcIm5hbWVcIl0pIHtcbiAgICAgICAgICAgIGNiKHRydWUsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgUGxhbmV0KCk7XG4gICAgICAgICAgICBwLnNldCgnbmFtZScsIGRhdGFbXCJuYW1lXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdyb3RhdGlvbl9wZXJpb2QnLCBkYXRhW1wicm90YXRpb25fcGVyaW9kXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdvcmJpdGFsX3BlcmlvZCcsIGRhdGFbXCJvcmJpdGFsX3BlcmlvZFwiXSk7XG4gICAgICAgICAgICBwLnNldCgnZGlhbWV0ZXInLCBkYXRhW1wiZGlhbWV0ZXJcIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ2NsaW1hdGUnLCBkYXRhW1wiY2xpbWF0ZVwiXSk7XG4gICAgICAgICAgICBwLnNldCgnZ3Jhdml0eScsIGRhdGFbXCJncmF2aXR5XCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCd0ZXJyYWluJywgZGF0YVtcInRlcnJhaW5cIl0pO1xuICAgICAgICAgICAgcC5zZXQoJ3N1cmZhY2Vfd2F0ZXInLCBkYXRhW1wic3VyZmFjZV93YXRlclwiXSk7XG4gICAgICAgICAgICBwLnNldCgncG9wdWxhdGlvbicsIGRhdGFbXCJwb3B1bGF0aW9uXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdyZXNpZGVudHMnLCBkYXRhW1wicmVzaWRlbnRzXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdmaWxtcycsIGRhdGFbXCJmaWxtc1wiXSk7XG4gICAgICAgICAgICBwLnNldCgnY3JlYXRlZCcsIGRhdGFbXCJjcmVhdGVkXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCdlZGl0ZWQnLCBkYXRhW1wiZWRpdGVkXCJdKTtcbiAgICAgICAgICAgIHAuc2V0KCd1cmwnLCBkYXRhW1widXJsXCJdKTtcbiAgICAgICAgICAgIGNiKG51bGwsIHApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBEZXRhaWxWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0YWdOYW1lOiBcInNlY3Rpb25cIixcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUoXCI8JS0gbmFtZSAlPlwiKSxcbiAgICAgICAgZXZlbnRzOiB7XG5cbiAgICAgICAgfSxcbiAgICAgICAgbWFrZUxpc3Q6IGZ1bmN0aW9uKGVsZW1lbnQsIGNvbGxlY3Rpb24sIGdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBJdGVtVmlldygpO1xuICAgICAgICAgICAgdmlldy5zaG93TGlzdChlbGVtZW50LCBjb2xsZWN0aW9uLCBncm91cCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBJdGVtVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGFnTmFtZTogXCJsaVwiLFxuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZShcIjxhIGhyZWY9JyMnPjwlLSBuYW1lICU+PC9hPlwiKSxcbiAgICAgICAgZ3JvdXA6IFwiXCIsXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgJ2NsaWNrIGEnOiAnc2hvd0RldGFpbHMnXG4gICAgICAgIH0sXG4gICAgICAgIHNob3dMaXN0OiBmdW5jdGlvbihlbGVtZW50LCBjb2xsZWN0aW9uLCBncm91cCkge1xuICAgICAgICAgICAgZWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb24gaW5zdGFuY2VvZiBCYWNrYm9uZS5Nb2RlbCkge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IEl0ZW1WaWV3KHttb2RlbDogY29sbGVjdGlvbn0pO1xuICAgICAgICAgICAgICAgIHZpZXcuZ3JvdXAgPSBncm91cDtcbiAgICAgICAgICAgICAgICBpZihncm91cCA9PSBcImZpbG1zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoXCI8YSBocmVmPScjJz48JS0gdGl0bGUgJT48L2E+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZSA9IHZpZXcucmVuZGVyKCkuZWw7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoZSk7XG4gICAgICAgICAgICAgICAgJChlKS5oaWRlKCkuc2xpZGVEb3duKDIwMCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb24gaW5zdGFuY2VvZiBCYWNrYm9uZS5Db2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGluZGV4IDwgNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSXRlbVZpZXcoe21vZGVsOiBpdGVtfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Lmdyb3VwID0gZ3JvdXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihncm91cCA9PSBcImZpbG1zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnRlbXBsYXRlID0gXy50ZW1wbGF0ZShcIjxhIGhyZWY9JyMnPjwlLSB0aXRsZSAlPjwvYT5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHZpZXcucmVuZGVyKCkuZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZSkuaGlkZSgpLnNsaWRlRG93bigyMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dEZXRhaWxzOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaFwiKS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBBcHAuc2VhcmNoKCk7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gJChcIiNyZXN1bHRcIik7XG4gICAgICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERldGFpbFZpZXcoe21vZGVsOiB0aGlzLm1vZGVsfSk7XG4gICAgICAgICAgICBzd2l0Y2godGhpcy5ncm91cCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwZW9wbGVcIjpcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJChcIiNwZXJzb24tdGVtcGxhdGVcIikuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZCh2aWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiI3Jlc3VsdCAuaG9tZXdvcmxkXCIpLCB0aGlzLm1vZGVsLmdldCgnaG9tZXdvcmxkJyksIFwicGxhbmV0c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiI3Jlc3VsdCAuZmlsbXNcIiksIHRoaXMubW9kZWwuZ2V0KCdmaWxtcycpLCBcImZpbG1zXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIjcmVzdWx0IC5zcGVjaWVzXCIpLCB0aGlzLm1vZGVsLmdldCgnc3BlY2llcycpLCBcInNwZWNpZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLnZlaGljbGVzXCIpLCB0aGlzLm1vZGVsLmdldCgndmVoaWNsZXMnKSwgXCJ2ZWhpY2xlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiI3Jlc3VsdCAuc3RhcnNoaXBzXCIpLCB0aGlzLm1vZGVsLmdldCgnc3RhcnNoaXBzJyksIFwic3RhcnNoaXBzXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmlsbXNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJChcIiNmaWxtLXRlbXBsYXRlXCIpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQodmlldy5yZW5kZXIoKS5lbCk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLmNoYXJhY3RlcnNcIiksIHRoaXMubW9kZWwuZ2V0KCdjaGFyYWN0ZXJzJyksIFwicGVvcGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIjcmVzdWx0IC5wbGFuZXRzXCIpLCB0aGlzLm1vZGVsLmdldCgncGxhbmV0cycpLCBcInBsYW5ldHNcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLnN0YXJzaGlwc1wiKSwgdGhpcy5tb2RlbC5nZXQoJ3N0YXJzaGlwcycpLCBcInN0YXJzaGlwc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiI3Jlc3VsdCAudmVoaWNsZXNcIiksIHRoaXMubW9kZWwuZ2V0KCd2ZWhpY2xlcycpLCBcInZlaGljbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIjcmVzdWx0IC5zcGVjaWVzXCIpLCB0aGlzLm1vZGVsLmdldCgnc3BlY2llcycpLCBcInNwZWNpZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFyc2hpcHNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJChcIiNzdGFyc2hpcC10ZW1wbGF0ZVwiKS5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIjcmVzdWx0IC5waWxvdHNcIiksIHRoaXMubW9kZWwuZ2V0KCdwaWxvdHMnKSwgXCJwZW9wbGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLmZpbG1zXCIpLCB0aGlzLm1vZGVsLmdldCgnZmlsbXMnKSwgXCJmaWxtc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInZlaGljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIHZpZXcudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoXCIjdmVoaWNsZS10ZW1wbGF0ZVwiKS5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIjcmVzdWx0IC5waWxvdHNcIiksIHRoaXMubW9kZWwuZ2V0KCdwaWxvdHMnKSwgXCJwZW9wbGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLmZpbG1zXCIpLCB0aGlzLm1vZGVsLmdldCgnZmlsbXMnKSwgXCJmaWxtc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWNpZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmlldy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJChcIiNyYWNlLXRlbXBsYXRlXCIpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmQodmlldy5yZW5kZXIoKS5lbCk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLnBlb3BsZVwiKSwgdGhpcy5tb2RlbC5nZXQoJ3Blb3BsZScpLCBcInBlb3BsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlTGlzdCgkKFwiI3Jlc3VsdCAuZmlsbXNcIiksIHRoaXMubW9kZWwuZ2V0KCdmaWxtcycpLCBcImZpbG1zXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicGxhbmV0c1wiOlxuICAgICAgICAgICAgICAgICAgICB2aWV3LnRlbXBsYXRlID0gXy50ZW1wbGF0ZSgkKFwiI3BsYW5ldC10ZW1wbGF0ZVwiKS5odG1sKCkpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHZpZXcucmVuZGVyKCkuZWwpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VMaXN0KCQoXCIjcmVzdWx0IC5yZXNpZGVudHNcIiksIHRoaXMubW9kZWwuZ2V0KCdyZXNpZGVudHMnKSwgXCJwZW9wbGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZUxpc3QoJChcIiNyZXN1bHQgLmZpbG1zXCIpLCB0aGlzLm1vZGVsLmdldCgnZmlsbXMnKSwgXCJmaWxtc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuXG4gICAgICAgIGVsOiAkKFwiI2FwcFwiKSxcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUoJCgnI2xvYWRpbmctdGVtcGxhdGUnKS5odG1sKCkpLFxuICAgICAgICBzdGF0dXM6IFwiXCIsXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgJ2tleXByZXNzICNzZWFyY2gnOiAncHJldmVudFNlbmQnLFxuICAgICAgICAgICAgJ2tleXVwICNzZWFyY2gnOiAnc2VhcmNoJyxcbiAgICAgICAgICAgICdjbGljayBbdHlwZT1cImNoZWNrYm94XCJdJzonc2VhcmNoJ1xuICAgICAgICB9LFxuICAgICAgICBwcmV2ZW50U2VuZDogZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBpZihlLndoaWNoID09PSAxMykge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2VhcmNoOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoXCIpLnZhbHVlO1xuICAgICAgICAgICAgaWYodmFsLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgZ2V0T3B0aW9ucyh2YWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBnZXRPcHRpb25zKFwidGhpc3N0cmluZ3Nob3VsZG5ldmVyc2hvd3VwYW5kdGhlcmVmb3JlY2xlYXJ0aGVsaXN0c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFwiQnJpYmluZyBzdG9ybXRyb29wZXJzLi4uXCI7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuICAgICAgICBzaG93U2VhcmNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoJyNzZWFyY2gtdGVtcGxhdGUnKS5odG1sKCkpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdHVzICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUoe3N0YXR1czogdGhpcy5zdGF0dXN9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAkKFwiI29wdGlvbnMgaDJcIikuc2xpZGVVcCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICB2YXIgQXBwID0gbmV3IEFwcFZpZXc7XG5cbiAgICB2YXIgZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAkKFwiaW5wdXRbdHlwZT1jaGVja2JveF1cIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBncm91cCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucztcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uO1xuICAgICAgICAgICAgc3dpdGNoKGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInBlb3BsZVwiOlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IFBlb3BsZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gcGVvcGxlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmlsbXNcIjpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBGaWxtcygpO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gZmlsbXM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFyc2hpcHNcIjpcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBTdGFyc2hpcHMoKTtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IHN0YXJzaGlwcztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInZlaGljbGVzXCI6XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgVmVoaWNsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IHZlaGljbGVzO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3BlY2llc1wiOlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IFNwZWNpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IHNwZWNpZXM7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJwbGFuZXRzXCI6XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgUGxhbmV0cygpO1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gcGxhbmV0cztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZigkKHRoaXMpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgICAgICAgICBjb21wYXJlT3B0aW9ucyhvcHRpb25zLCBjb2xsZWN0aW9uLCBncm91cCwgdmFsLCBmdW5jdGlvbihlcnIsIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoby5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJoMi5cIiArIGdyb3VwKS5zbGlkZVVwKDIwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiaDIuXCIgKyBncm91cCkuc2xpZGVEb3duKDIwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSXRlbVZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zaG93TGlzdCgkKFwiI1wiICsgZ3JvdXApLCBvLCBncm91cCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCJoMi5cIiArIGdyb3VwKS5zbGlkZVVwKDIwMCk7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSXRlbVZpZXcoKTtcbiAgICAgICAgICAgICAgICB2aWV3LnNob3dMaXN0KCQoXCIjXCIgKyBncm91cCksIG9wdGlvbnMsIGdyb3VwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb21wYXJlT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNvbGxlY3Rpb24sIGdyb3VwLCB2YWwsIGNiKSB7XG4gICAgICAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbihvcHRpb24sIGluZGV4KSB7XG4gICAgICAgICAgICBjb21wYXJlKGdyb3VwLCBvcHRpb24sIHZhbCwgZnVuY3Rpb24oZXJyLCBhZGQpIHtcbiAgICAgICAgICAgICAgICBpZihhZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hZGQob3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoKytpbmRleCA9PT0gY29sbGVjdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY29tcGFyZSA9IGZ1bmN0aW9uKGdyb3VwLCBvcHRpb24sIHZhbCwgY2IpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZTtcbiAgICAgICAgaWYoZ3JvdXAgPT09IFwiZmlsbXNcIikge1xuICAgICAgICAgICAgYXR0cmlidXRlID0gb3B0aW9uLmdldChcInRpdGxlXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGUgPSBvcHRpb24uZ2V0KFwibmFtZVwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGF0dHJpYnV0ZS5pbmRleE9mKHZhbC50b0xvd2VyQ2FzZSgpKSAhPSAtMSkge1xuICAgICAgICAgICAgY2IobnVsbCwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYihudWxsLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGxvYWRGcm9tQXBpID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgZ3JvdXApIHtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCAmJiByZXF1ZXN0LnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIGdldEFycmF5RnJvbUFwaShjb2xsZWN0aW9uLCBncm91cCwgZGF0YSwgKGRhdGFbXCJjb3VudFwiXSAvIDEwKSwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmVMb2FkaW5nKGdyb3VwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIFwiaHR0cDovL3N3YXBpLmNvL2FwaS9cIiArIGdyb3VwICsgXCIvP2Zvcm1hdD1qc29uXCIsIHRydWUpO1xuICAgICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICB9O1xuXG4gICAgdmFyIGxvYWRlZCA9IFtdO1xuICAgIHZhciBkb25lTG9hZGluZyA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgIGxvYWRlZC5wdXNoKGdyb3VwKTtcbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgQXBwLnN0YXR1cyA9IFwiRmVlZGluZyBDaGV3aWUuLi5cIjtcbiAgICAgICAgICAgIEFwcC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihsb2FkZWQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBBcHAuc3RhdHVzID0gXCJTcGVsbGNoZWNraW5nIFlvZGEuLi5cIjtcbiAgICAgICAgICAgIEFwcC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihsb2FkZWQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICBBcHAuc3RhdHVzID0gXCJIdWdnaW5nIERhcnRoIFZhZGVyLi4uXCI7XG4gICAgICAgICAgICBBcHAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgQXBwLnN0YXR1cyA9IFwiS2lzc2luZyBQcmluY2VzcyBMZWlhLi4uXCI7XG4gICAgICAgICAgICBBcHAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgICAgQXBwLnN0YXR1cyA9IFwiUG9kcmFjaW5nIHdpdGggQW5ha2luLi4uXCI7XG4gICAgICAgICAgICBBcHAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobG9hZGVkLmxlbmd0aCA9PT0gNikge1xuICAgICAgICAgICAgbWFrZUNvbGxlY3Rpb25zKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG1ha2VDb2xsZWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBsb2FkZWQuZm9yRWFjaChmdW5jdGlvbihncm91cCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbGxlY3RGb3JHcm91cChncm91cCwgZnVuY3Rpb24oZXJyLCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYoKytpbmRleCA9PT0gbG9hZGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBBcHAuc2hvd1NlYXJjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGNvbGxlY3RGb3JHcm91cCA9IGZ1bmN0aW9uKGdyb3VwLCBjYikge1xuICAgICAgICBzd2l0Y2goZ3JvdXApIHtcbiAgICAgICAgICAgIGNhc2UgXCJwZW9wbGVcIjpcbiAgICAgICAgICAgICAgICBwZW9wbGUuZm9yRWFjaChmdW5jdGlvbihwZXJzb24sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3RGb3JQZXJzb24ocGVyc29uLCBmdW5jdGlvbihlcnIsIHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCsraW5kZXggPT09IHBlb3BsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBwZW9wbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJmaWxtc1wiOlxuICAgICAgICAgICAgICAgIGZpbG1zLmZvckVhY2goZnVuY3Rpb24oZmlsbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdEZvckZpbG0oZmlsbSwgZnVuY3Rpb24oZXJyLCBmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigrK2luZGV4ID09PSBmaWxtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBmaWxtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0YXJzaGlwc1wiOlxuICAgICAgICAgICAgICAgIHN0YXJzaGlwcy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXJzaGlwLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yU3RhcnNoaXAoc3RhcnNoaXAsIGZ1bmN0aW9uKGVyciwgcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoKytpbmRleCA9PT0gc3RhcnNoaXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHN0YXJzaGlwcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInZlaGljbGVzXCI6XG4gICAgICAgICAgICAgICAgdmVoaWNsZXMuZm9yRWFjaChmdW5jdGlvbih2ZWhpY2xlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yVmVoaWNsZSh2ZWhpY2xlLCBmdW5jdGlvbihlcnIsIHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCsraW5kZXggPT09IHZlaGljbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHZlaGljbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3BlY2llc1wiOlxuICAgICAgICAgICAgICAgIHNwZWNpZXMuZm9yRWFjaChmdW5jdGlvbihyYWNlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yUmFjZShyYWNlLCBmdW5jdGlvbihlcnIsIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCsraW5kZXggPT09IHNwZWNpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgc3BlY2llcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBsYW5ldHNcIjpcbiAgICAgICAgICAgICAgICBwbGFuZXRzLmZvckVhY2goZnVuY3Rpb24ocGxhbmV0LCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0Rm9yUGxhbmV0KHBsYW5ldCwgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigrK2luZGV4ID09PSBwbGFuZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHBsYW5ldHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY29sbGVjdCA9IGZ1bmN0aW9uKGl0ZW0sIGF0dHJpYnV0ZSwgY29sbGVjdGlvbiwgY2IpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IGl0ZW0uZ2V0KGF0dHJpYnV0ZSk7XG4gICAgICAgIHZhciBvYmplY3RzO1xuICAgICAgICBzd2l0Y2goY29sbGVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBwZW9wbGU6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBQZW9wbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZmlsbXM6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBGaWxtcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzdGFyc2hpcHM6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBTdGFyc2hpcHMoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdmVoaWNsZXM6XG4gICAgICAgICAgICAgICAgb2JqZWN0cyA9IG5ldyBWZWhpY2xlcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBzcGVjaWVzOlxuICAgICAgICAgICAgICAgIG9iamVjdHMgPSBuZXcgU3BlY2llcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBwbGFuZXRzOlxuICAgICAgICAgICAgICAgIG9iamVjdHMgPSBuZXcgUGxhbmV0cygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmKHR5cGVvZiB2YWx1ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBnZXRWYWx1ZUZyb21Db2xsZWN0aW9uKHZhbHVlcywgY29sbGVjdGlvbiwgZnVuY3Rpb24oZXJyLCBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jYih0cnVlLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldChhdHRyaWJ1dGUsIG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYodmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUNvbGxlY3Rpb24odmFsdWUsIGNvbGxlY3Rpb24sIGZ1bmN0aW9uKGVyciwgb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jYih0cnVlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHMuYWRkKG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0cy5sZW5ndGggPT09IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0KGF0dHJpYnV0ZSwgb2JqZWN0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYihudWxsLCBpdGVtKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZ2V0VmFsdWVGcm9tQ29sbGVjdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLCBjb2xsZWN0aW9uLCBjYikge1xuICAgICAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmKGl0ZW0uZ2V0KCd1cmwnKSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYihudWxsLCBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCsraW5kZXggPT09IGNvbGxlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2IodHJ1ZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY29sbGVjdEZvclBlcnNvbiA9IGZ1bmN0aW9uKHBlcnNvbiwgY2IpIHtcbiAgICAgICAgY29sbGVjdChwZXJzb24sIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcCkge1xuICAgICAgICAgICAgcGVyc29uID0gcDtcbiAgICAgICAgICAgIGNvbGxlY3QocGVyc29uLCBcInNwZWNpZXNcIiwgc3BlY2llcywgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICAgICAgcGVyc29uID0gcDtcbiAgICAgICAgICAgICAgICBjb2xsZWN0KHBlcnNvbiwgXCJ2ZWhpY2xlc1wiLCB2ZWhpY2xlcywgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbiA9IHA7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3QocGVyc29uLCBcInN0YXJzaGlwc1wiLCBzdGFyc2hpcHMsIGZ1bmN0aW9uKGVyciwgcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc29uID0gcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3QocGVyc29uLCBcImhvbWV3b3JsZFwiLCBwbGFuZXRzLCBmdW5jdGlvbihlcnIsIHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb24gPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHBlcnNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb2xsZWN0Rm9yRmlsbSA9IGZ1bmN0aW9uKGZpbG0sIGNiKSB7XG4gICAgICAgIGNvbGxlY3QoZmlsbSwgXCJjaGFyYWN0ZXJzXCIsIHBlb3BsZSwgZnVuY3Rpb24oZXJyLCBmKSB7XG4gICAgICAgICAgICBmaWxtID0gZjtcbiAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJwbGFuZXRzXCIsIHBsYW5ldHMsIGZ1bmN0aW9uKGVyciwgZikge1xuICAgICAgICAgICAgICAgIGZpbG0gPSBmO1xuICAgICAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJzdGFyc2hpcHNcIiwgc3RhcnNoaXBzLCBmdW5jdGlvbihlcnIsIGYpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbSA9IGY7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJ2ZWhpY2xlc1wiLCB2ZWhpY2xlcywgZnVuY3Rpb24oZXJyLCBmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxtID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3QoZmlsbSwgXCJzcGVjaWVzXCIsIHNwZWNpZXMsIGZ1bmN0aW9uKGVyciwgZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbG0gPSBmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIGZpbG0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb2xsZWN0Rm9yU3RhcnNoaXAgPSBmdW5jdGlvbihzdGFyc2hpcCwgY2IpIHtcbiAgICAgICAgY29sbGVjdChzdGFyc2hpcCwgXCJwaWxvdHNcIiwgcGVvcGxlLCBmdW5jdGlvbihlcnIsIHMpIHtcbiAgICAgICAgICAgIHN0YXJzaGlwID0gcztcbiAgICAgICAgICAgIGNvbGxlY3Qoc3RhcnNoaXAsIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcykge1xuICAgICAgICAgICAgICAgIHN0YXJzaGlwID0gcztcbiAgICAgICAgICAgICAgICBjYihudWxsLCBzdGFyc2hpcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjb2xsZWN0Rm9yVmVoaWNsZSA9IGZ1bmN0aW9uKHZlaGljbGUsIGNiKSB7XG4gICAgICAgIGNvbGxlY3QodmVoaWNsZSwgXCJwaWxvdHNcIiwgcGVvcGxlLCBmdW5jdGlvbihlcnIsIHYpIHtcbiAgICAgICAgICAgIHZlaGljbGUgPSB2O1xuICAgICAgICAgICAgY29sbGVjdCh2ZWhpY2xlLCBcImZpbG1zXCIsIGZpbG1zLCBmdW5jdGlvbihlcnIsIHYpIHtcbiAgICAgICAgICAgICAgICB2ZWhpY2xlID0gdjtcbiAgICAgICAgICAgICAgICBjYihudWxsLCB2ZWhpY2xlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGNvbGxlY3RGb3JSYWNlID0gZnVuY3Rpb24ocmFjZSwgY2IpIHtcbiAgICAgICAgY29sbGVjdChyYWNlLCBcInBlb3BsZVwiLCBwZW9wbGUsIGZ1bmN0aW9uKGVyciwgcikge1xuICAgICAgICAgICAgcmFjZSA9IHI7XG4gICAgICAgICAgICBjb2xsZWN0KHJhY2UsIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcikge1xuICAgICAgICAgICAgICAgIHJhY2UgPSByO1xuICAgICAgICAgICAgICAgIGNiKG51bGwsIHJhY2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgY29sbGVjdEZvclBsYW5ldCA9IGZ1bmN0aW9uKHBsYW5ldCwgY2IpIHtcbiAgICAgICAgY29sbGVjdChwbGFuZXQsIFwicmVzaWRlbnRzXCIsIHBlb3BsZSwgZnVuY3Rpb24oZXJyLCBwKSB7XG4gICAgICAgICAgICBwbGFuZXQgPSBwO1xuICAgICAgICAgICAgY29sbGVjdChwbGFuZXQsIFwiZmlsbXNcIiwgZmlsbXMsIGZ1bmN0aW9uKGVyciwgcCkge1xuICAgICAgICAgICAgICAgIHBsYW5ldCA9IHA7XG4gICAgICAgICAgICAgICAgY2IobnVsbCwgcGxhbmV0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgbG9hZEZyb21BcGkocGVvcGxlLCBcInBlb3BsZVwiKTtcbiAgICBsb2FkRnJvbUFwaShmaWxtcywgXCJmaWxtc1wiKTtcbiAgICBsb2FkRnJvbUFwaShzdGFyc2hpcHMsIFwic3RhcnNoaXBzXCIpO1xuICAgIGxvYWRGcm9tQXBpKHZlaGljbGVzLCBcInZlaGljbGVzXCIpO1xuICAgIGxvYWRGcm9tQXBpKHNwZWNpZXMsIFwic3BlY2llc1wiKTtcbiAgICBsb2FkRnJvbUFwaShwbGFuZXRzLCBcInBsYW5ldHNcIik7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
